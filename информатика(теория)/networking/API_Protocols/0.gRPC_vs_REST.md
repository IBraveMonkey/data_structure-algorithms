# üöÄ gRPC: –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π RPC –æ—Ç Google

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ü–æ—á–µ–º—É gRPC?](#–ø–æ—á–µ–º—É-grpc)
2. [Protocol Buffers (protobuf)](#protocol-buffers)
3. [–¢–∏–ø—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è](#—Ç–∏–ø—ã-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è)
4. [HTTP/2: –î–≤–∏–≥–∞—Ç–µ–ª—å gRPC](#http2)
5. [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å REST](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Å-rest)

---

## ‚ùì –ü–æ—á–µ–º—É gRPC?

**gRPC (Remote Procedure Call)** ‚Äî —ç—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–∞–ø—Ä—è–º—É—é –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –∫–∞–∫ –µ—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª –ª–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç REST, –∫–æ—Ç–æ—Ä—ã–π –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **—Ä–µ—Å—É—Ä—Å—ã** (—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ: `/users`), gRPC –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **–¥–µ–π—Å—Ç–≤–∏—è** (–≥–ª–∞–≥–æ–ª—ã: `GetUser()`).

---

## üõ†Ô∏è Protocol Buffers (protobuf)

gRPC –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Protobuf** –∫–∞–∫ —è–∑—ã–∫ –æ–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (IDL) –∏ –∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

> [!IMPORTANT]
> **Protobuf vs JSON:**
> - **JSON**: –¢–µ–∫—Å—Ç–æ–≤—ã–π, –∏–∑–±—ã—Ç–æ—á–Ω—ã–π (–∫–ª—é—á–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –æ–±—ä–µ–∫—Ç–µ), –º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥.
> - **Protobuf**: –ë–∏–Ω–∞—Ä–Ω—ã–π, —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π. –ö–ª—é—á–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏ –ø–æ–ª–µ–π (tags).

**–ü—Ä–∏–º–µ—Ä .proto —Ñ–∞–π–ª–∞:**
```protobuf
syntax = "proto3";

service UserService {
  rpc GetUser (UserRequest) returns (UserResponse);
}

message UserRequest {
  string user_id = 1; // 1 ‚Äî —ç—Ç–æ —Ç–µ–≥ –ø–æ–ª—è –≤ –±–∏–Ω–∞—Ä–Ω–æ–º –ø–æ—Ç–æ–∫–µ
}

message UserResponse {
  string name = 1;
  int32 age = 2;
}
```

---

## üîÑ –¢–∏–ø—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

gRPC –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 4 —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö:

1.  **Unary (–£–Ω–∞—Ä–Ω—ã–π)**: –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å ‚Äî –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç. –ö–ª–∞—Å—Å–∏–∫–∞.
2.  **Server Streaming**: –ö–ª–∏–µ–Ω—Ç –ø–æ—Å—ã–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, —Å–µ—Ä–≤–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ –∏ —à–ª–µ—Ç –ø–∞—á–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π.
3.  **Client Streaming**: –ö–ª–∏–µ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ –∏ —à–ª–µ—Ç –ø–∞—á–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π, —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑.
4.  **Bidirectional Streaming**: –û–±–∞ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –ø–æ—Ç–æ–∫–∏ –∏ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

```mermaid
graph LR
    C[Client] -- Request --> S[Server]
    S -- Response --> C
    
    C -- Stream --> S2[Server]
    S2 -- Single Response --> C
    
    C -- Single Request --> S3[Server]
    S3 -- Stream --> C
    
    C -- Stream --> S4[Server]
    S4 -- Stream --> C
```

---

## ‚ö° HTTP/2: –î–≤–∏–≥–∞—Ç–µ–ª—å gRPC

gRPC —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç—Ä–æ–≥–æ –ø–æ–≤–µ—Ä—Ö **HTTP/2**. –≠—Ç–æ –¥–∞–µ—Ç:
- **–ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–æ–∂–Ω–æ —Å–ª–∞—Ç—å –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ –æ–¥–Ω–æ–º TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏.
- **–°–∂–∞—Ç–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (HPACK)**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ HTTP –æ—á–µ–Ω—å —Ç—è–∂–µ–ª—ã–µ, HTTP/2 –∏—Ö —Å–∂–∏–º–∞–µ—Ç.
- **Binary framing**: –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–µ —Ç–µ–∫—Å—Ç–æ–º, –∞ –±–∏–Ω–∞—Ä–Ω—ã–º–∏ —Ñ—Ä–µ–π–º–∞–º–∏.

---

## ‚öñÔ∏è –ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å gRPC?

| –°–∏—Ç—É–∞—Ü–∏—è | –í—ã–±–æ—Ä | –ü–æ—á–µ–º—É? |
| :--- | :--- | :--- |
| **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** | üü¢ gRPC | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è. |
| **–ü—É–±–ª–∏—á–Ω–æ–µ API / Web** | üü° REST | –õ–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ –ª—é–±–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏. |
| **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** | üü¢ gRPC | –≠–∫–æ–Ω–æ–º–∏—è –±–∞—Ç–∞—Ä–µ–∏ –∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞ —Å—á–µ—Ç –±–∏–Ω–∞—Ä–Ω–æ—Å—Ç–∏. |
| **Real-time (–ß–∞—Ç—ã, –ò–≥—Ä—ã)** | üü¢ gRPC | –ó–∞ —Å—á–µ—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞. |

---

> [!TIP]
> –í Go gRPC —è–≤–ª—è–µ—Ç—Å—è "—Ä–æ–¥–Ω—ã–º" —Å–ø–æ—Å–æ–±–æ–º –æ–±—â–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Kubernetes) –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ Go –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç gRPC –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º. üõ°Ô∏è
