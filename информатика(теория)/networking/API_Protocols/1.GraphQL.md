# ๐ธ๏ธ GraphQL: ะฏะทัะบ ะทะฐะฟัะพัะพะฒ ะฝะพะฒะพะณะพ ะฟะพะบะพะปะตะฝะธั

## ๐ ะกะพะดะตัะถะฐะฝะธะต
1. [ะคะธะปะพัะพัะธั GraphQL](#ัะธะปะพัะพัะธั)
2. [ะขะธะฟะพะฒะฐั ะกัะตะผะฐ (Schema)](#ััะตะผะฐ)
3. [ะะตะทะพะปะฒะตัั (Resolvers)](#ัะตะทะพะปะฒะตัั)
4. [ะัะพะฑะปะตะผั REST, ะบะพัะพััะต ัะตัะฐะตั GraphQL](#ะฟัะพะฑะปะตะผั-rest)
5. [ะะพะณะดะฐ ะะ ััะพะธั ะธัะฟะพะปัะทะพะฒะฐัั](#ะผะธะฝััั)

---

## ๐งญ ะคะธะปะพัะพัะธั

**GraphQL** โ ััะพ ะฝะต ะฑะฐะทะฐ ะดะฐะฝะฝัั, ััะพ ัะปะพะน ะผะตะถะดั ะบะปะธะตะฝัะพะผ ะธ ะธััะพัะฝะธะบะฐะผะธ ะดะฐะฝะฝัั. ะะปะฐะฒะฝะฐั ะธะดะตั: **"ะะปะธะตะฝั ะทะฐะบะฐะทัะฒะฐะตั ัะพะปัะบะพ ัะพ, ััะพ ะตะผั ะฝัะถะฝะพ"**.

ะ ะพัะปะธัะธะต ะพั REST, ะณะดะต ััััะบัััะฐ ะพัะฒะตัะฐ ะพะฟัะตะดะตะปัะตััั ัะตัะฒะตัะพะผ, ะฒ GraphQL ััััะบัััั ะพะฟัะตะดะตะปัะตั **ะบะปะธะตะฝั**.

---

## ๐ ะกัะตะผะฐ (Schema)

ะัะต ะดะฐะฝะฝัะต ะฒ GraphQL ัััะพะณะพ ัะธะฟะธะทะธัะพะฒะฐะฝั. ะกัะตะผะฐ ะพะฟะธััะฒะฐะตั, ะบะฐะบะธะต ะพะฑัะตะบัั ัััะตััะฒััั ะธ ะบะฐะบะธะต ะฟะพะปั ั ะฝะธั ะตััั.

```graphql
type User {
  id: ID!
  username: String!
  posts: [Post] # ะกะฒัะทะฐะฝะฝัะน ัะฟะธัะพะบ ะฟะพััะพะฒ
}

type Query {
  getUser(id: ID!): User
}
```

---

## โ๏ธ ะะตะทะพะปะฒะตัั (Resolvers)

ะญัะพ ััะฝะบัะธะธ ะฝะฐ ัะตัะฒะตัะต, ะบะพัะพััะต "ะดะพะฑัะฒะฐัั" ะดะฐะฝะฝัะต ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ะฟะพะปั. 

> [!NOTE]
> ะกะฐะผะพะต ะบัััะพะต: ัะตะทะพะปะฒะตัั ะผะพะณัั ะฑัะฐัั ะดะฐะฝะฝัะต ะธะท ัะฐะทะฝัั ะผะตัั. ะงะฐััั ะฟะพััะพะฒ ะผะพะถะตั ะปะตะถะฐัั ะฒ Postgres, ะฐ ะฐะฒะฐัะฐัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั โ ะฒ S3. ะะปั ะบะปะธะตะฝัะฐ ััะพ ะฒัะณะปัะดะธั ะบะฐะบ ะพะดะธะฝ ะทะฐะฟัะพั.

```mermaid
graph TD
    Client[ะะฐะฟัะพั ะะปะธะตะฝัะฐ] --> GQL[GraphQL Server]
    GQL --> R1[Resolver: User Info]
    GQL --> R2[Resolver: User Posts]
    R1 --> DB[(PostgreSQL)]
    R2 --> Micro[Microservice B]
    DB --> GQL
    Micro --> GQL
    GQL --> Response[ะัะพะณะพะฒัะน JSON]
```

---

## ๐ ะัะพะฑะปะตะผั REST, ะบะพัะพััะต ัะตัะฐะตั GraphQL

1.  **Overfetching (ะะทะฑััะพัะฝะพััั)**: ะั ัะบะฐัะธะฒะฐะตัะต ะฒะตัั ะพะฑัะตะบั `User` (50 ะฟะพะปะตะน), ัะพัั ะฒะฐะผ ะฝัะถะฝะพ ัะพะปัะบะพ `name`. ะ ะผะพะฑะธะปัะฝัั ัะตััั ััะพ ัะธะปัะฝะพ ะทะฐะผะตะดะปัะตั ัะฐะฑะพัั.
2.  **Underfetching (ะะตะดะพััะฐัะพัะฝะพััั)**: ะงัะพะฑั ะฟะพะบะฐะทะฐัั ัะบัะฐะฝ "ะัะพัะธะปั + ะกะฟะธัะพะบ ะทะฐะบะฐะทะพะฒ", ะฒ REST ะฝัะถะฝะพ ัะดะตะปะฐัั 2-3 ะทะฐะฟัะพัะฐ. ะ GraphQL โ ััะพ **ะพะดะธะฝ** ะทะฐะฟัะพั.
3.  **ะะตััะธะพะฝะฝะพััั**: ะ REST ัะฐััะพ ะฟัะธัะพะดะธััั ะฟะปะพะดะธัั `/v1/`, `/v2/`. ะ GraphQL ะฟะพะปั ะฟัะพััะพ ะฟะพะผะตัะฐัััั ะบะฐะบ `deprecated`, ะฐ ะฝะพะฒัะต ะดะพะฑะฐะฒะปััััั ะฑะตะท ะฑะพะปะธ ะดะปั ััะฐััั ะบะปะธะตะฝัะพะฒ.

---

## โ๏ธ ะะพะณะดะฐ ะะ ััะพะธั ะธัะฟะพะปัะทะพะฒะฐัั GraphQL

- **ะัะพัััะต CRUD**: ะัะปะธ ั ะฒะฐั ะฒัะตะณะพ 2 ัะฐะฑะปะธัั, GraphQL ะดะพะฑะฐะฒะธั ัะพะปัะบะพ ะปะธัะฝัั ัะปะพะถะฝะพััั.
- **ะััะธัะพะฒะฐะฝะธะต**: ะ REST ะผะพะถะฝะพ ะบััะธัะพะฒะฐัั ะฟะพ URL. ะ GraphQL URL ะฒัะตะณะดะฐ ะพะดะธะฝ (`/graphql`), ะฟะพััะพะผั ะบััะธัะพะฒะฐัั ะพัะฒะตัั ัะปะพะถะฝะตะต (ะฝัะถะฝั ัะฟะตัะธะฐะปัะฝัะต ะบะปะธะตะฝัั ัะธะฟะฐ Apollo ะธะปะธ Relay).
- **ะะตะทะพะฟะฐัะฝะพััั**: ะะปะพัะผััะปะตะฝะฝะธะบ ะผะพะถะตั ะฝะฐะฟะธัะฐัั ะทะฐะฟัะพั ั ะพะณัะพะผะฝะพะน ะฒะปะพะถะตะฝะฝะพัััั: `user { posts { author { posts { author ... } } } }`, ััะพ ะฟะพะปะพะถะธั ัะตัะฒะตั. ะัะถะฝะพ ะฒะฝะตะดัััั "ะพัะตะฝะบั ััะพะธะผะพััะธ ะทะฐะฟัะพัะฐ" (Query Complexity).

---

> [!IMPORTANT]
> GraphQL โ ััะพ ะฟัะพ **ัััะตะบัะธะฒะฝะพััั ััะพะฝัะตะฝะดะฐ**. ะัะปะธ ั ะฒะฐั ัะปะพะถะฝัะน UI ั ะผะฝะพะถะตััะฒะพะผ ัะฒัะทะตะน โ ััะพ ะฒะฐั ะฒัะฑะพั. ๐ฑ๐ป๐ก๏ธ
