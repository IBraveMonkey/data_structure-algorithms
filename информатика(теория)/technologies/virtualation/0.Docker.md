# üê≥ Docker

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ß—Ç–æ —Ç–∞–∫–æ–µ Docker?](#—á—Ç–æ-—Ç–∞–∫–æ–µ-docker)
2. [–ì–ª–∞–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (Cake Analogy)](#–≥–ª–∞–≤–Ω—ã–µ-—Å—É—â–Ω–æ—Å—Ç–∏-cake-analogy)
3. [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
4. [Dockerfile –∏ –ö–æ–º–∞–Ω–¥—ã](#dockerfile-–∏-–∫–æ–º–∞–Ω–¥—ã)

---

## 1. ü§î –ß—Ç–æ —Ç–∞–∫–æ–µ Docker?

**Docker** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± —É–ø–∞–∫–æ–≤–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—Å—ë, —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ–Ω—Ñ–∏–≥–∏), –≤ –æ–¥–Ω—É "–∫–æ—Ä–æ–±–∫—É" (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).
–ì–¥–µ –±—ã –≤—ã –Ω–∏ –æ—Ç–∫—Ä—ã–ª–∏ —ç—Ç—É –∫–æ—Ä–æ–±–∫—É (–Ω–∞ –≤–∞—à–µ–º –º–∞–∫–µ, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Linux, –≤ –æ–±–ª–∞–∫–µ) ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤–æ**.

> [!NOTE]
> –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É "–ù–∞ –º–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç".

---

## 2. üéÇ –ì–ª–∞–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (Cake Analogy)

–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å Docker, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –ø–µ—á–µ—Ç–µ —Ç–æ—Ä—Ç.

### üìú Image (–û–±—Ä–∞–∑) = –†–µ—Ü–µ–ø—Ç
*   –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ñ–∞–π–ª (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è). –û–Ω –ª–µ–∂–∏—Ç –Ω–∞ –¥–∏—Å–∫–µ –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç.
*   –û–Ω **Read-Only** (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —É–∂–µ –ø–µ—á–µ—Ç—Å—è —Ç–æ—Ä—Ç).
*   **–ü—Ä–∏–º–µ—Ä**: `ubuntu:20.04`, `postgres:13`.

### üßÅ Container (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä) = –¢–æ—Ä—Ç
*   –≠—Ç–æ –∂–∏–≤–æ–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –ø–æ —Ä–µ—Ü–µ–ø—Ç—É (Image).
*   –ò–∑ –æ–¥–Ω–æ–≥–æ –†–µ—Ü–µ–ø—Ç–∞ (Image) –º–æ–∂–Ω–æ –∏—Å–ø–µ—á—å 100 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¢–æ—Ä—Ç–æ–≤ (Container).
*   –í—ã –º–æ–∂–µ—Ç–µ –µ–≥–æ "—Å—ä–µ—Å—Ç—å" (–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å), –∞ —Ä–µ—Ü–µ–ø—Ç –æ—Å—Ç–∞–Ω–µ—Ç—Å—è.

### üè≠ Registry (–†–µ–µ—Å—Ç—Ä) = –ö—É–ª–∏–Ω–∞—Ä–Ω–∞—è –∫–Ω–∏–≥–∞
*   –ú–µ—Å—Ç–æ, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ä–µ—Ü–µ–ø—Ç—ã.
*   **Docker Hub** ‚Äî —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è –ø—É–±–ª–∏—á–Ω–∞—è –∫–Ω–∏–≥–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤.

```mermaid
graph LR
    Dev[–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫] -->|–ü–∏—à–µ—Ç| Dockerfile
    Dockerfile -->|Build| Image["Image (–†–µ—Ü–µ–ø—Ç)"]
    Image -->|Run| Container1["Container 1 (–¢–æ—Ä—Ç)"]
    Image -->|Run| Container2["Container 2 (–¢–æ—Ä—Ç)"]
    
    subgraph Host ["–í–∞—à –ö–æ–º–ø—å—é—Ç–µ—Ä"]
        Container1
        Container2
    end
```

---

## 3. ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –ú–∞—à–∏–Ω (VM), Docker –Ω–µ —Ç–∞—â–∏—Ç —Å —Å–æ–±–æ–π —Ü–µ–ª—É—é –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é –°–∏—Å—Ç–µ–º—É. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —è–¥—Ä–æ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã (Linux), –Ω–æ –∏–∑–æ–ª–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã.

*   **VM**: –î–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∂–∏–ª—å—Ü–∞ (–¥–æ—Ä–æ–≥–æ, —Ç—è–∂–µ–ª–æ).
*   **Docker**: –ö–æ–º–º—É–Ω–∞–ª–∫–∞. –ö—É—Ö–Ω—è (–Ø–¥—Ä–æ OS) –æ–±—â–∞—è, –Ω–æ –∫–æ–º–Ω–∞—Ç—ã (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã.

---

## 4. üìù Dockerfile –∏ –ö–æ–º–∞–Ω–¥—ã

Dockerfile ‚Äî —ç—Ç–æ —Ç–æ—Ç —Å–∞–º—ã–π –ª–∏—Å—Ç–æ–∫ –±—É–º–∞–≥–∏, –≥–¥–µ –≤—ã –ø–∏—à–µ—Ç–µ —Ä–µ—Ü–µ–ø—Ç.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ü—Ä–∏–º–µ—Ä |
| :--- | :--- | :--- |
| `FROM` | –ë–∞–∑–æ–≤—ã–π —Å–ª–æ–π (–û—Å–Ω–æ–≤–∞ –ø–∏—Ü—Ü—ã) | `FROM ubuntu:20.04` |
| `RUN` | –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É **–ø—Ä–∏ —Å–±–æ—Ä–∫–µ** (–Ω–∞—Ä–µ–∑–∞—Ç—å –∫–æ–ª–±–∞—Å—É) | `RUN apt-get install python3` |
| `COPY` | –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤–Ω—É—Ç—Ä—å | `COPY app.py /src/app.py` |
| `CMD` | –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å **–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ** (—Å—ä–µ—Å—Ç—å –ø–∏—Ü—Ü—É) | `CMD ["python3", "app.py"]` |

> [!IMPORTANT]
> **RUN vs CMD**:
> *   `RUN` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ *Image* (–±–∏–ª–¥–∏—Ç–µ).
> *   `CMD` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ *Container*.

### Docker Compose
–ï—Å–ª–∏ —É –≤–∞—Å –º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–æ–≤ (Backend + DB + Redis), –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö –ø–æ –æ–¥–Ω–æ–º—É –Ω–µ—É–¥–æ–±–Ω–æ.
`docker-compose.yml` ‚Äî —ç—Ç–æ —Ñ–∞–π–ª, –≥–¥–µ –≤—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ –≤–µ—Å—å —Å–≤–æ–π "–±–∞–Ω–∫–µ—Ç" —Å—Ä–∞–∑—É. –û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `docker-compose up` –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤—Å—ë –æ–∫—Ä—É–∂–µ–Ω–∏–µ.