# üêô Docker Compose: –ú–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?](#—á—Ç–æ-—Ç–∞–∫–æ–µ-docker-compose)
2. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ docker-compose.yml](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª–∞-docker-composeyml)
4. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)
5. [–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è](#–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è)

---

## ‚ùì –ß—Ç–æ —Ç–∞–∫–æ–µ Docker Compose?

**Docker Compose** ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö Docker-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. üõ†Ô∏è

–ï—Å–ª–∏ –æ–±—ã—á–Ω—ã–π Docker —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, —Ç–æ Compose –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å–∞—Ç—å **—Ü–µ–ª—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É** (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∫—ç—à, –æ—á–µ—Ä–µ–¥–∏) –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

---

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

1.  **Services (–°–µ—Ä–≤–∏—Å—ã)**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `web`, `db`). –í—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ, –∫–∞–∫–æ–π –æ–±—Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—å –∏ —Ç.–¥.
2.  **Networks (–°–µ—Ç–∏)**: –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç—É–Ω–Ω–µ–ª–∏, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Compose —Å–æ–∑–¥–∞–µ—Ç –æ–±—â—É—é —Å–µ—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ñ–∞–π–ª–µ. üåê
3.  **Volumes (–í–æ–ª—é–º—ã/–¢–æ–º–∞)**: –°–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–º –∏–∑ –ë–î –Ω–µ –∏—Å—á–µ–∑–∞—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. üíæ

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ docker-compose.yml

–≠—Ç–æ "—Ä–µ—Ü–µ–ø—Ç" –≤–∞—à–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ —è–∑—ã–∫–µ YAML:

```yaml
version: '3.8' # –í–µ—Ä—Å–∏—è —Ñ–æ—Ä–º–∞—Ç–∞

services:
  app: # –ò–º—è —Å–µ—Ä–≤–∏—Å–∞
    build: . # –°–æ–±–∏—Ä–∞—Ç—å –∏–∑ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–∏
    ports:
      - "8080:8080"
    depends_on:
      - db # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ –ë–î
    environment:
      - DB_URL=postgres://db:5432/mydb

  db:
    image: postgres:15-alpine # –ì–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑
    volumes:
      - postgres_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=secret

volumes:
  postgres_data: # –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–æ–º–∞
```

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç? |
|:---|:---|
| `docker-compose up` | –°–æ–±–∏—Ä–∞–µ—Ç, —Å–æ–∑–¥–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. |
| `docker-compose up -d` | –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (detached). |
| `docker-compose down` | –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ **—É–¥–∞–ª—è–µ—Ç** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —Å–µ—Ç–∏. |
| `docker-compose ps` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. |
| `docker-compose logs -f` | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. |

---

## üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```mermaid
graph LR
    User((–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)) -- "Port 8080" --> App[App Container]
    
    subgraph "Docker Network"
    App -- "SQL (internal)" --> DB[(Database Container)]
    App -- "Redis Protocol" --> Cache[Redis Container]
    end
    
    DB -- "Persist" --> Vol[(Volume: data)]
```

---

## üåü –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

> [!TIP]
> **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
> - **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –í–º–µ—Å—Ç–æ –¥–µ—Å—è—Ç–∏ –¥–ª–∏–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ `docker run` –≤—ã –ø–∏—à–µ—Ç–µ –æ–¥–Ω—É `docker-compose up`.
> - **–ò–∑–æ–ª—è—Ü–∏—è**: –£ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å–≤–æ—è —Å–µ—Ç—å –∏ —Å–≤–æ–∏ –≤–µ—Ä—Å–∏–∏ –ë–î.
> - **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å**: –í–∞—à–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –±—É–¥–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –æ–∫—Ä—É–∂–µ–Ω–∏—é –∫–æ–ª–ª–µ–≥–∏.

---

> [!IMPORTANT]
> Docker Compose –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –¥–ª—è **—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤ –±–æ–ª—å—à–∏—Ö –º–∞—Å—à—Ç–∞–±–∞—Ö –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Kubernetes. üèóÔ∏è
