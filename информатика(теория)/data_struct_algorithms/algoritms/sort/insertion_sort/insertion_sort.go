package insertion_sort

/*
Insertion Sort (Сортировка вставками)

Что это такое?
Сортировка вставками — это простой алгоритм, который строит отсортированный массив по одному элементу за раз.
Он работает так же, как вы сортируете карты в руке: берете новую карту и вставляете ее в правильное место среди уже отсортированных.

Зачем это нужно?
- Сортировать небольшие массивы.
- Досортировывать почти отсортированные массивы (работает за O(n) в лучшем случае).
- Используется как часть более сложных алгоритмов (например, TimSort использует Insertion Sort для малых подмассивов).

В чём смысл?
- Мы делим массив на "отсортированную" (слева) и "неотсортированную" (справа) части.
- Берем элемент из правой части и сдвигаем элементы левой, пока не найдем ему место.

Когда использовать?
- Когда массив маленький (N < 50).
- Когда массив уже частично отсортирован (адаптивность).
- Когда нужна простая, устойчивая (stable) сортировка, и не хочется выделять доп. память (in-place).

Как работает?
1. Начинаем со второго элемента (индекс 1).
2. Сравниваем его с элементами слева.
3. Сдвигаем все большие элементы вправо.
4. Вставляем текущий элемент в освободившееся место.

### Сложность

| Метрика | Лучшая (O) | Средняя/Худшая (O) | Пространственная (O) |
|:---|:---:|:---:|:---:|
| Время | O(n) | O(n²) | O(1) |

\*O(n) достигается на почти отсортированных данных.
*/

func InsertionSort(arr []int) {
	for i := 1; i < len(arr); i++ {
		key := arr[i]
		j := i - 1

		// Сдвигаем элементы arr[0..i-1], которые больше key, на одну позицию вперед
		for j >= 0 && arr[j] > key {
			arr[j+1] = arr[j]
			j--
		}
		arr[j+1] = key
	}
}
