# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [Clean / Onion / Hexagonal Architecture](#1-clean--onion--hexagonal-architecture)
2. [CQRS (Command and Query Responsibility Segregation)](#2-cqrs)
3. [Event Driven Architecture](#3-event-driven-architecture)
4. [Saga Pattern](#4-saga-pattern)
5. [S.O.L.I.D. –∏ Dependency Injection](#5-solid-–∏-dependency-injection)

---

## 1. üèóÔ∏è Domain-Centric Architectures: –≠–≤–æ–ª—é—Ü–∏—è –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –≥–ª–∞–≤–Ω–æ–µ: –∑–∞—á–µ–º –≤–æ–æ–±—â–µ –ø—Ä–∏–¥—É–º–∞–ª–∏ –≤—Å–µ —ç—Ç–∏ "–ª—É–∫–æ–≤–∏—Ü—ã" –∏ "–≥–µ–∫—Å–∞–≥–æ–Ω—ã"? 

### üöÄ –≠–≤–æ–ª—é—Ü–∏—è: –û—Ç N-Tier –∫ Domain-Centric

–†–∞–Ω—å—à–µ (–∏ —á–∞—Å—Ç–æ —Å–µ–π—á–∞—Å) —É—á–∏–ª–∏ **3-—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (N-Tier)**:
`UI (–°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è) -> Business Logics (–°–ª–æ–π –ª–æ–≥–∏–∫–∏) -> Data Access (–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö/–ë–î)`

**–í —á–µ–º –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞?**
–í —ç—Ç–æ–π —Å—Ö–µ–º–µ **–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∑–∞–≤–∏—Å–µ–ª–∞ –æ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**. –ï—Å–ª–∏ –≤—ã –º–µ–Ω—è–ª–∏ —Å—Ö–µ–º—É –ë–î –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–∏ —Å SQL –Ω–∞ NoSQL, –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –±—ã–ª–∏ "–∑–∞–ª–æ–∂–Ω–∏–∫–∞–º–∏" —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π.

**–†–µ—à–µ–Ω–∏–µ: –ò–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Dependency Inversion)**.
–ú—ã —Å—Ç–∞–≤–∏–º –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ —Ü–µ–Ω—Ç—Ä, –∞ –ë–∞–∑—É –î–∞–Ω–Ω—ã—Ö –∏ UI –¥–µ–ª–∞–µ–º "–ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏". 

---

### üßÖ 1.1 Onion Architecture (–õ—É–∫–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
*–ê–≤—Ç–æ—Ä: –î–∂–µ—Ñ—Ñ—Ä–∏ –ü–∞–ª–µ—Ä–º–æ (2008)*

![Onion Architecture](/Users/ilasgibadullin/Documents/develop/qwerty/data_structure:%20algorithms/go/–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞(—Ç–µ–æ—Ä–∏—è)/architecture/img/onion.png)

–õ—É–∫–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–µ–ª–∞–µ—Ç –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫—Ä—É–≥–æ–≤. –ß–µ–º –±–ª–∏–∂–µ –∫ —Ü–µ–Ω—Ç—Ä—É, —Ç–µ–º —á–∏—â–µ –∏ –≤–∞–∂–Ω–µ–µ –∫–æ–¥.

#### üèóÔ∏è –°–ª–æ–∏ (–∏–∑–Ω—É—Ç—Ä–∏ –Ω–∞—Ä—É–∂—É):
1.  **Domain Model (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —è–¥—Ä–æ)**: –¢–æ–ª—å–∫–æ —Å—É—â–Ω–æ—Å—Ç–∏ (`Order`, `User`) –∏ –±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞. –≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –Ω–∏ –æ—Ç —á–µ–≥–æ.
2.  **Domain Services**: –õ–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–≤—è–∑—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—É—â–Ω–æ—Å—Ç–µ–π, –Ω–æ –≤—Å—ë –µ—â–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª.
3.  **Application Services (Use Cases)**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä. –û–Ω –∑–Ω–∞–µ—Ç: "–°–Ω–∞—á–∞–ª–∞ –ø–æ–π–¥–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –≤–æ–∑—å–º–∏ —é–∑–µ—Ä–∞, –ø–æ—Ç–æ–º –≤—ã–∑–æ–≤–∏ –º–µ—Ç–æ–¥ –∏–∑ Domain Model". –ù–æ –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (—á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å).
4.  **Infrastructure / External World**: –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ: –ë–î, HTTP, –§–∞–π–ª—ã, –ö–æ–Ω—Å–æ–ª—å.

**üí° –ì–ª–∞–≤–Ω–∞—è —Ñ–∏—à–∫–∞:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Application Services, –∞ —Ç–µ –æ—Ç Domain. –¶–µ–Ω—Ç—Ä ‚Äî —ç—Ç–æ "–±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏—Å—Ç–∏–Ω–∞", –∫–æ—Ç–æ—Ä–∞—è –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –≤–Ω–µ—à–Ω–µ–º –º–∏—Ä–µ.

---

### ‚¨° 1.2 Hexagonal Architecture (Ports and Adapters)
*–ê–≤—Ç–æ—Ä: –ê–ª–∏—Å—Ç–µ—Ä –ö–æ–∫–±–µ—Ä–Ω (2005)*

![Hexagonal Architecture](/Users/ilasgibadullin/Documents/develop/qwerty/data_structure:%20algorithms/go/–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞(—Ç–µ–æ—Ä–∏—è)/architecture/img/hex.png)

–ï—Å–ª–∏ –õ—É–∫–æ–≤–∞—è ‚Äî —ç—Ç–æ –ø—Ä–æ —Å–ª–æ–∏, —Ç–æ –ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è ‚Äî –ø—Ä–æ **–ø–æ–¥–∫–ª—é—á–∞–µ–º–æ—Å—Ç—å**. 

#### üß© –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è:
*   **The Inside (Application Core)**: –ù–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –û–Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ HTTP, GRPC –∏–ª–∏ PostgreSQL.
*   **Ports (–ü–æ—Ä—Ç—ã)**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (—Ä–æ–∑–µ—Ç–∫–∏). –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ–≤–æ—Ä–∏—Ç: "–ú–Ω–µ –Ω—É–∂–µ–Ω –∫—Ç–æ-—Ç–æ, –∫—Ç–æ —É–º–µ–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" (`UserRepository`).
*   **Adapters (–ê–¥–∞–ø—Ç–µ—Ä—ã)**: –í–∏–ª–∫–∏. `PostgresAdapter` ‚Äî —ç—Ç–æ –≤–∏–ª–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ä–æ–∑–µ—Ç–∫—É `UserRepository`. 

#### üîÑ –¢–∏–ø—ã –ø–æ—Ä—Ç–æ–≤:
1.  **Driving (–ò–Ω–ø—É—Ç—ã)**: –¢–µ, –∫—Ç–æ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å (REST API, CLI, –¢–µ—Å—Ç—ã).
2.  **Driven (–ê—É—Ç–ø—É—Ç—ã)**: –¢–µ, –∫–æ–≥–æ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å (–ë–î, –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π, –í–Ω–µ—à–µ–µ API).

**üéÆ –ê–Ω–∞–ª–æ–≥–∏—è:** –ò–≥—Ä–æ–≤–∞—è –ø—Ä–∏—Å—Ç–∞–≤–∫–∞ (Core) –∏–º–µ–µ—Ç –ø–æ—Ä—Ç—ã (HDMI, USB). –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Ç–µ–ª–∏–∫ –∏–ª–∏ –Ω–æ–≤—ã–π (Adapter), –Ω–æ —Å–∞–º–∞ –ø—Ä–∏—Å—Ç–∞–≤–∫–∞ –∏ –∏–≥—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë –Ω–µ –º–µ–Ω—è—é—Ç—Å—è.

---

### üèõÔ∏è 1.3 Clean Architecture (–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
*–ê–≤—Ç–æ—Ä: –†–æ–±–µ—Ä—Ç "Uncle Bob" –ú–∞—Ä—Ç–∏–Ω (2012)*

![Clean Architecture](/Users/ilasgibadullin/Documents/develop/qwerty/data_structure:%20algorithms/go/–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞(—Ç–µ–æ—Ä–∏—è)/architecture/img/clear.jpg)

–≠—Ç–æ "—Å–∞–º–∞—è —Å—Ç—Ä–æ–≥–∞—è" –≤–µ—Ä—Å–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∞. –û–Ω–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏–¥–µ–∏ –õ—É–∫–æ–≤–æ–π –∏ –ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–æ–π, —Ñ–æ–∫—É—Å–∏—Ä—É—è—Å—å –Ω–∞ –ø—Ä–∞–≤–∏–ª–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

#### üèóÔ∏è –ß–µ—Ç—ã—Ä–µ –∫—Ä—É–≥–∞ (The Dependency Rule):
1.  **Entities (–ñ–µ–ª—Ç—ã–π –∫—Ä—É–≥)**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–∏–∑–Ω–µ—Å–∞. –û–Ω–∏ –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–∂–µ –≤—Å–µ–≥–æ.
2.  **Use Cases (–ö—Ä–∞—Å–Ω—ã–π –∫—Ä—É–≥)**: –°—Ü–µ–Ω–∞—Ä–∏–∏ ("–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç", "–ó–∞–±—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä"). –û–ø–∏—Å—ã–≤–∞—é—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏.
3.  **Interface Adapters (–ó–µ–ª–µ–Ω—ã–π –∫—Ä—É–≥)**: –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, –ü—Ä–µ–∑–µ–Ω—Ç–µ—Ä—ã, –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç JSON –≤ –æ–±—ä–µ–∫—Ç—ã –∏ –æ–±—Ä–∞—Ç–Ω–æ).
4.  **Frameworks & Drivers (–ì–æ–ª—É–±–æ–π –∫—Ä—É–≥)**: –°–∞–º—ã–π –≤–Ω–µ—à–Ω–∏–π —Å–ª–æ–π. –í–∞—à–∞ –ë–î (Postgres), –≤–∞—à —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (Gin/Echo).

**‚ö†Ô∏è –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç ‚Äî Crossing Boundaries:**
–ö–æ–≥–¥–∞ Use Case —Ö–æ—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –æ–Ω –Ω–µ –∑–æ–≤–µ—Ç –ë–î –Ω–∞–ø—Ä—è–º—É—é. –û–Ω –∑–æ–≤–µ—Ç **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**. –û–±—ä–µ–∫—Ç –ë–î (–ê–¥–∞–ø—Ç–µ—Ä) –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Use Case —á–µ—Ä–µ–∑ **Dependency Injection**.

---

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –†–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Onion | Hexagonal | Clean |
| :--- | :--- | :--- | :--- |
| **–í —Ñ–æ–∫—É—Å–µ** | –°–ª–æ–∏ –∏ –∏–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | –í–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º–æ—Å—Ç—å (–ü–æ—Ä—Ç—ã) | –ì—Ä–∞–Ω–∏—Ü—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è |
| **–ë–î** | –î–µ—Ç–∞–ª—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã | Driven Adapter | Detail (–≤–Ω–µ—à–Ω–∏–π –∫—Ä—É–≥) |
| **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** | –í —Å–∞–º–æ–º —Ü–µ–Ω—Ç—Ä–µ | –í–Ω—É—Ç—Ä–∏ –≥–µ–∫—Å–∞–≥–æ–Ω–∞ | –í Entities –∏ Use Cases |

#### üõ†Ô∏è –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –ø–∞–ø–∫–∞—Ö (Go-style):
```text
/internal
  /domain       <-- Core: –≠–Ω—Ç–∏—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Ports)
  /usecase      <-- Application logic (Services)
  /infra        <-- Adapters: SQL, HTTP clients, Redis
  /delivery     <-- Driving Adapters: Rest API, CLI
/cmd            <-- –°–±–æ—Ä–∫–∞ (Main): —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç DI
```

> [!TIP]
> **–î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö**: –ù–µ —Ñ–∞–Ω–∞—Ç–µ–π—Ç–µ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º. –í–∞–∂–Ω–æ –æ–¥–Ω–æ ‚Äî **–∏–∑–æ–ª–∏—Ä—É–π—Ç–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞**. –ï—Å–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—é –ª–æ–≥–∏–∫—É, –Ω–µ –∑–∞–ø—É—Å–∫–∞—è Docker —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö ‚Äî –≤—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏.

---

#### 3. üü¢ Interface Adapters (–ê–¥–∞–ø—Ç–µ—Ä—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)

**–ß—Ç–æ —Ç—É—Ç:**
- **Controllers**: –ü—Ä–∏–Ω–∏–º–∞—é—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã, –≤—ã–∑—ã–≤–∞—é—Ç Use Cases
- **Presenters**: –§–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ (JSON, HTML)
- **Gateways/Repositories**: –†–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

**–ü—Ä–∞–≤–∏–ª–æ:** –ü—Ä–µ–≤—Ä–∞—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Use Cases (–∏ –æ–±—Ä–∞—Ç–Ω–æ).

**–ü—Ä–∏–º–µ—Ä –Ω–∞ Go:**
```go
// infrastructure/http/user_controller.go
package http

import (
    "encoding/json"
    "net/http"
    "myapp/application"
)

type UserController struct {
    createUserUseCase *application.CreateUserUseCase
}

func (c *UserController) CreateUser(w http.ResponseWriter, r *http.Request) {
    // 1. –ü–∞—Ä—Å–∏–º –∑–∞–ø—Ä–æ—Å (–∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏–∑ HTTP –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
    var req struct {
        Email    string `json:"email"`
        Password string `json:"password"`
    }
    json.NewDecoder(r.Body).Decode(&req)
    
    // 2. –í—ã–∑—ã–≤–∞–µ–º Use Case
    err := c.createUserUseCase.Execute(req.Email, req.Password)
    
    // 3. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç (–∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏–∑ –æ—à–∏–±–∫–∏ –≤ HTTP)
    if err != nil {
        w.WriteHeader(http.StatusBadRequest)
        json.NewEncoder(w).Encode(map[string]string{"error": err.Error()})
        return
    }
    
    w.WriteHeader(http.StatusCreated)
    json.NewEncoder(w).Encode(map[string]string{"status": "created"})
}
```

```go
// infrastructure/postgres/user_repository.go
package postgres

import (
    "database/sql"
    "myapp/domain"
)

type PostgresUserRepository struct {
    db *sql.DB
}

// –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ Application Layer
func (r *PostgresUserRepository) Save(user *domain.User) error {
    query := "INSERT INTO users (id, email, password, balance) VALUES ($1, $2, $3, $4)"
    _, err := r.db.Exec(query, user.ID, user.Email, user.Password, user.Balance)
    return err
}

func (r *PostgresUserRepository) GetByEmail(email string) (*domain.User, error) {
    var user domain.User
    query := "SELECT id, email, password, balance FROM users WHERE email = $1"
    err := r.db.QueryRow(query, email).Scan(&user.ID, &user.Email, &user.Password, &user.Balance)
    if err != nil {
        return nil, err
    }
    return &user, nil
}
```

---

#### 4. üîµ Frameworks & Drivers (–§—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –î—Ä–∞–π–≤–µ—Ä—ã)

**–ß—Ç–æ —Ç—É—Ç:**
- –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Postgres, MongoDB, Redis)
- –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (Gin, Echo, Chi)
- –í–Ω–µ—à–Ω–∏–µ API, —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

**–ü—Ä–∞–≤–∏–ª–æ:** –¢–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏. –ù–∏–∫–∞–∫–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

```go
// cmd/main.go
package main

import (
    "database/sql"
    "net/http"
    _ "github.com/lib/pq"
    
    "myapp/application"
    httpInfra "myapp/infrastructure/http"
    "myapp/infrastructure/postgres"
)

func main() {
    // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î (Frameworks Layer)
    db, _ := sql.Open("postgres", "connection_string")
    
    // 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (Interface Adapters)
    userRepo := &postgres.PostgresUserRepository{db: db}
    
    // 3. –°–æ–∑–¥–∞–Ω–∏–µ Use Case (Application Layer)
    createUserUseCase := application.NewCreateUserUseCase(userRepo)
    
    // 4. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (Interface Adapters)
    userController := &httpInfra.UserController{
        createUserUseCase: createUserUseCase,
    }
    
    // 5. –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (Frameworks Layer)
    http.HandleFunc("/users", userController.CreateUser)
    http.ListenAndServe(":8080", nil)
}
```

---

### üî∑ Hexagonal Architecture (–ü–æ—Ä—Ç—ã –∏ –ê–¥–∞–ø—Ç–µ—Ä—ã)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ** Clean Architecture. –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è —Ç–∞ –∂–µ, –Ω–æ —Å –¥—Ä—É–≥–æ–π —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–µ–π:

- **–ü–æ—Ä—Ç (Port)** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UserRepository`)
- **–ê–¥–∞–ø—Ç–µ—Ä (Adapter)** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `PostgresUserRepository`)

```mermaid
flowchart LR
    subgraph External["–í–Ω–µ—à–Ω–∏–π –º–∏—Ä"]
        HTTP[HTTP API]
        Postgres[PostgreSQL]
        Redis[Redis Cache]
    end
    
    subgraph Hexagon["‚¨° –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è<br/>(–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)"]
        Domain[Domain Entities]
        UseCases[Use Cases]
    end
    
    HTTP -->|Adapter| PortIn["Input Port<br/>(Interface)"]
    PortIn --> UseCases
    
    UseCases --> PortOut["Output Port<br/>(Interface)"]
    PortOut -->|Adapter| Postgres
    PortOut -->|Adapter| Redis
```

**–ü–ª—é—Å—ã:**
- –õ–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å Postgres –Ω–∞ MongoDB (–ø—Ä–æ—Å—Ç–æ –¥—Ä—É–≥–æ–π –∞–¥–∞–ø—Ç–µ—Ä)
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–∏—Å–ø–æ–ª—å–∑—É–µ–º mock –∞–¥–∞–ø—Ç–µ—Ä—ã)

---

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤**: –ú–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å Gin –Ω–∞ Echo
2. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –ë–î –∏ HTTP
3. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç UI**: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å CLI, gRPC, WebSocket –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è Use Cases
4. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ë–î**: –ú–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å Postgres –Ω–∞ Mongo

> [!TIP]
> **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –∏ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –¥–æ–ª–≥–æ–π –∂–∏–∑–Ω—å—é. –î–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ.

---

## 2. ‚ö° CQRS

**Command and Query Responsibility Segregation** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ –ß—Ç–µ–Ω–∏–µ –∏ –ó–∞–ø–∏—Å—å.

### ü§î –ó–∞—á–µ–º?
–û–±—ã—á–Ω–æ –º—ã —á–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–∞–∑–¥–æ —á–∞—â–µ, —á–µ–º –ø–∏—à–µ–º. –í –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–Ω—É –∏ —Ç—É –∂–µ –º–æ–¥–µ–ª—å (–∏ —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î) –¥–ª—è `SELECT` –∏ –¥–ª—è `UPDATE`. –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.

*   **Command (–ö–æ–º–∞–Ω–¥–∞)**: –ò–∑–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ ("–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑", "–°–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å"). –°–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é.
*   **Query (–ó–∞–ø—Ä–æ—Å)**: –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∞—è, —á–∞—Å—Ç–æ –≤–æ–æ–±—â–µ –±–µ–∑ –ª–æ–≥–∏–∫–∏, –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç DTO (Data Transfer Object).

### üèóÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏?
–ß–∞—â–µ –≤—Å–µ–≥–æ CQRS –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–º–µ—Å—Ç–µ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:
1.  **Write DB**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ (—á–∞—Å—Ç–æ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è, –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è).
2.  **Read DB**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è (NoSQL –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –∫–µ—à).

> [!WARNING]
> **Eventual Consistency (–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ –∫–æ–Ω–µ—á–Ω–æ–º —Å—á–µ—Ç–µ)**: –ü–æ—Å–∫–æ–ª—å–∫—É –¥–∞–Ω–Ω—ã–µ –∏–∑ Write DB –ø–æ–ø–∞–¥–∞—é—Ç –≤ Read DB –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–æ–ª—é —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –≠—Ç–æ —Ü–µ–Ω–∞ –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å.

---

## 3. üì° Event Driven Architecture (EDA)

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≥–¥–µ —Å–∏—Å—Ç–µ–º—ã –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **—Å–æ–±—ã—Ç–∏—è**.

*   **–°–æ–±—ã—Ç–∏–µ (Event)**: –§–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Å–ª—É—á–∏–ª—Å—è ("OrderCreated", "PaymentReceived"). –ï–≥–æ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.
*   **–ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π**: Kafka, RabbitMQ, NATS.

### üéûÔ∏è Event Sourcing (ES)
–ú—ã –Ω–µ —Ö—Ä–∞–Ω–∏–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ë–∞–ª–∞–Ω—Å: 100"). –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã —Ö—Ä–∞–Ω–∏–º **—Ü–µ–ø–æ—á–∫—É –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π**, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–µ–ª–∏ –∫ —ç—Ç–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é.

**–ü—Ä–∏–º–µ—Ä (–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç):**
1. –°—á—ë—Ç –æ—Ç–∫—Ä—ã—Ç (+0)
2. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (+100)
3. –ü–æ–∫—É–ø–∫–∞ (-30)
*–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å (70) –≤—ã—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—É—Ç–µ–º —Å–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π.*

*   **–ó–∞—á–µ–º?**: –ê—É–¥–∏—Ç, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å "–æ—Ç–º–æ—Ç–∞—Ç—å" –≤—Ä–µ–º—è –Ω–∞–∑–∞–¥, –ª–µ–≥–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ (–∏—Å–ø—Ä–∞–≤–∏–ª–∏ –ª–æ–≥–∏–∫—É –∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è).
*   **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ù—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å **Snapshot'—ã** (—Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è), —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω —Å–æ–±—ã—Ç–∏–π –∫–∞–∂–¥—ã–π —Ä–∞–∑.

---

## 4. üìú Saga Pattern

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö. –í –æ–±–ª–∞–∫–∞—Ö –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å `BEGIN TRANSACTION ... COMMIT` —Å—Ä–∞–∑—É –Ω–∞ —Ç—Ä–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –°–∞–≥–∏:

### ü©∞ 4.1 –•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è (Choreography)
–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è. –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.
*   **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –°–µ—Ä–≤–∏—Å –ê —Å–¥–µ–ª–∞–ª –¥–µ–ª–æ -> –∫–∏–Ω—É–ª —Å–æ–±—ã—Ç–∏–µ -> –°–µ—Ä–≤–∏—Å –ë —É—Å–ª—ã—à–∞–ª -> —Å–¥–µ–ª–∞–ª —Å–≤–æ—ë –¥–µ–ª–æ -> –∫–∏–Ω—É–ª —Å–æ–±—ã—Ç–∏–µ.
*   **–ü–ª—é—Å—ã**: –ù–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞, –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å.
*   **–ú–∏–Ω—É—Å—ã**: –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–∑–∞–ø—É—Ç–∞–Ω–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞), —Ä–∏—Å–∫ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

### üíÇ 4.2 –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (Orchestration)
–ï—Å—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π "–¥–∏—Ä–∏–∂–µ—Ä" (Orchestrator), –∫–æ—Ç–æ—Ä—ã–π –≥–æ–≤–æ—Ä–∏—Ç –≤—Å–µ–º, —á—Ç–æ –¥–µ–ª–∞—Ç—å.
*   **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —à–ª–µ—Ç –∫–æ–º–∞–Ω–¥—É –°–µ—Ä–≤–∏—Å—É –ê -> –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç -> —à–ª–µ—Ç –∫–æ–º–∞–Ω–¥—É –°–µ—Ä–≤–∏—Å—É –ë.
*   **–ü–ª—é—Å—ã**: –í—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –ª–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å.
*   **–ú–∏–Ω—É—Å—ã**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º –∏ –≤–∞–∂–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º (–µ—Å–ª–∏ –æ–Ω —É–ø–∞–ª ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –≤—Å—Ç–∞–ª).

---

## üéØ –ò—Ç–æ–≥: –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å?

| –°–∏—Ç—É–∞—Ü–∏—è | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω |
| :--- | :--- |
| –ù—É–∂–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –æ—Ç –ë–î –∏ –≤–µ–±–∞ | **Clean Architecture / Hexagonal** |
| –û—á–µ–Ω—å –º–Ω–æ–≥–æ —á—Ç–µ–Ω–∏–π –∏ —Å–ª–æ–∂–Ω–∞—è –∑–∞–ø–∏—Å—å | **CQRS** |
| –ù—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –∞—É–¥–∏—Ç | **Event Sourcing** |
| –°–ª–æ–∂–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ | **Saga (Orchestration/Choreography)** |
| –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | **Event Driven Architecture** |

## 5. üíâ Dependency Injection (DI) –∏ IoC

### üîÑ Inversion of Control (IoC)
"–ù–µ –∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º, –º—ã —Å–∞–º–∏ –≤–∞–º –ø–æ–∑–≤–æ–Ω–∏–º".
*   **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: –í—ã —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∫–æ–¥–æ–º.
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫**: –§—Ä–µ–π–º–≤–æ—Ä–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∞—à–∏–º –∫–æ–¥–æ–º (–≤—ã–∑—ã–≤–∞–µ—Ç –≤–∞—à–∏ —Ñ—É–Ω–∫—Ü–∏–∏).

### üîå Dependency Injection (DI)
–í–∞—à –∫–ª–∞—Å—Å –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`new Database()`). –û–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∞—Ç—å –∏—Ö –∏–∑–≤–Ω–µ (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä).

**–ü–ª–æ—Ö–æ (–ñ–µ—Å—Ç–∫–∞—è —Å—Ü–µ–ø–∫–∞):**
```go
type Service struct {
    db MySQLDatabase // –ó–∞–≤–∏—Å–∏–º –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ë–î ‚ùå
}
```

**–•–æ—Ä–æ—à–æ (–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏):**
```go
type Service struct {
    repo UserRepository // –ó–∞–≤–∏—Å–∏–º –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ‚úÖ
}
```

> [!TIP]
> **DIP (Dependency Inversion Principle)**: –ú–æ–¥—É–ª–∏ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –º–æ–¥—É–ª–µ–π –Ω–∏–∂–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è. –û–±–∞ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π.