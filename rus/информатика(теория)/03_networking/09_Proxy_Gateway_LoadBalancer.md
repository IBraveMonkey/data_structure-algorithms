# üõ°Ô∏è –ü—Ä–æ–∫—Å–∏, –®–ª—é–∑—ã –∏ –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [Forward Proxy (–û–±—ã—á–Ω—ã–π –ø—Ä–æ–∫—Å–∏)](#forward-proxy-proxy)
2. [Reverse Proxy (–û–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏)](#reverse-proxy)
3. [API Gateway (–®–ª—é–∑)](#api-gateway)
4. [Load Balancer (–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏)](#load-balancer)
5. [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –≤—ã–±–æ—Ä](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π)

---

–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å—ã —Ä–µ–¥–∫–æ –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–ª–æ–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ—à–∞–µ—Ç —Å–≤–æ—é –∑–∞–¥–∞—á—É.

---

## 1. ‚è© Forward Proxy (Proxy)

–°–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–∏—Ç **–ø–µ—Ä–µ–¥ –∫–ª–∏–µ–Ω—Ç–æ–º**. –û–Ω –∑–∞—â–∏—â–∞–µ—Ç –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å—ã –∫–ª–∏–µ–Ω—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.

```mermaid
graph LR
    User((–ö–ª–∏–µ–Ω—Ç)) --> Proxy[Forward Proxy]
    Proxy --> Internet((–ò–Ω—Ç–µ—Ä–Ω–µ—Ç))
    Internet --> Server[(–í–Ω–µ—à–Ω–∏–π –°–∞–π—Ç)]
```

- **–°–∫—Ä—ã—Ç–∏–µ IP**: –°–∞–π—Ç –≤–∏–¥–∏—Ç –∞–¥—Ä–µ—Å –ø—Ä–æ–∫—Å–∏, –∞ –Ω–µ –≤–∞—à.
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ó–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ—Ü—Å–µ—Ç—è–º –≤ –æ—Ñ–∏—Å–µ.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ï—Å–ª–∏ 100 —á–µ–ª–æ–≤–µ–∫ —Ö–æ—Ç—è—Ç —Å–∫–∞—á–∞—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª, –ø—Ä–æ–∫—Å–∏ —Å–∫–∞—á–∞–µ—Ç –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Ä–∞–∑–¥–∞—Å—Ç –≤—Å–µ–º.

> [!NOTE]
> –ü—Ä–∏–º–µ—Ä: Proxy(Private Network) ‚Äî —ç—Ç–æ, –ø–æ —Å—É—Ç–∏, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç Forward Proxy.

---

## 2. ‚Ü©Ô∏è Reverse Proxy

–°–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–∏—Ç **–ø–µ—Ä–µ–¥ –≤–∞—à–∏–º–∏ –±—ç–∫–µ–Ω–¥–∞–º–∏**. –û–Ω –∑–∞—â–∏—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

```mermaid
graph LR
    Internet((–ò–Ω—Ç–µ—Ä–Ω–µ—Ç)) --> RP[Reverse Proxy]
    subgraph Local_Network["–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å"]
        RP --> Backend1[App Server 1]
        RP --> Static[Static Server]
    end
```

### –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?
- **SSL-—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è**: –ü—Ä–æ–∫—Å–∏ –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è —Ç—è–∂–µ–ª—É—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É HTTPS, –∞ –±—ç–∫–µ–Ω–¥—É –æ—Ç–¥–∞–µ—Ç –æ–±—ã—á–Ω—ã–π HTTP.
- **–°–∂–∞—Ç–∏–µ (Gzip)**: –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤.
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: `/api` –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ Go-—Å–µ—Ä–≤–µ—Ä, –∞ `/static` ‚Äî –Ω–∞ Nginx —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏.

> [!TIP]
> **Nginx** ‚Äî —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π Reverse Proxy –≤ –º–∏—Ä–µ.

---

## 3. üö™ API Gateway

–≠—Ç–æ "–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π" Reverse Proxy, –∑–∞—Ç–æ—á–µ–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API.

```mermaid
graph TD
    Client((Mobile App)) --> Gateway[API Gateway]
    
    subgraph Microservices
        Gateway --> Auth[Auth Service]
        Gateway --> Billing[Billing Service]
        Gateway --> Inventory[Inventory Service]
    end
```

### –§—É–Ω–∫—Ü–∏–∏ —à–ª—é–∑–∞:
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç JWT-—Ç–æ–∫–µ–Ω –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –¥–æ–π–¥–µ—Ç –¥–æ —Å–µ—Ä–≤–∏—Å–∞.
- **Rate Limiting**: "–ù–µ –±–æ–ª—å—à–µ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è".
- **–ê–≥—Ä–µ–≥–∞—Ü–∏—è**: –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ —à–ª—é–∑ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –≤ —Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫ —Ä–∞–∑–Ω—ã–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ—Ç–æ—Ä—ã—Ö —à–ª—é–∑ —Å–æ–±–µ—Ä–µ—Ç –≤ –æ–¥–∏–Ω JSON.

---

## 4. ‚öñÔ∏è Load Balancer (–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫)

–†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏.

```mermaid
graph LR
    User((–ó–∞–ø—Ä–æ—Å—ã)) --> LB{Load Balancer}
    LB --> S1[Server A]
    LB --> S2[Server B]
    LB --> S3[Server C]
```

### –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
- **Round Robin**: –ü–æ –æ—á–µ—Ä–µ–¥–∏ (1-2-3-1...).
- **Least Connections**: –¢–æ–º—É, –∫—Ç–æ —Å–µ–π—á–∞—Å –º–µ–Ω—å—à–µ –≤—Å–µ–≥–æ –∑–∞–Ω—è—Ç.
- **IP Hash**: –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É (—á—Ç–æ–±—ã —Å–µ—Å—Å–∏—è –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞–ª–∞—Å—å).

> [!IMPORTANT]
> **Health Check**: –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ "–ø–∏–Ω–∫—É–µ—Ç" —Å–µ—Ä–≤–µ—Ä—ã. –ï—Å–ª–∏ Server B "—É–ø–∞–ª", –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Å–ª–∞—Ç—å –Ω–∞ –Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫.

---

## 5. üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞ –∫–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å |
|:---|:---:|:---|
| **Forward Proxy** | –ù–∞ –∫–ª–∏–µ–Ω—Ç–∞ | –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ |
| **Reverse Proxy** | –ù–∞ —Å–µ—Ä–≤–µ—Ä | –ó–∞—â–∏—Ç–∞, SSL, —Å—Ç–∞—Ç–∏–∫–∞ |
| **API Gateway** | –ù–∞ —Å–∏—Å—Ç–µ–º—É | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API, –ª–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞ |
| **Load Balancer** | –ù–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å |

### –ü—Ä–∏–º–µ—Ä –Ω–∞ Go (Load Balancer Round-Robin):
```go
var current uint32
backends := []string{"http://s1.test", "http://s2.test"}

func getNextBackend() string {
    idx := atomic.AddUint32(&current, 1) % uint32(len(backends))
    return backends[idx]
}
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

- **Proxy** ‚Äî —ç—Ç–æ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫.
- **Reverse Proxy** –¥–µ–ª–∞–µ—Ç –≤–∞—à—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–∫—Ä—ã—Ç–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π.
- **API Gateway** ‚Äî —ç—Ç–æ "—É–º–Ω—ã–π" –≤—Ö–æ–¥ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.
- **Load Balancer** –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ –≤—ã–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã.
