# üçí Redis (REmote DIctionary Server)

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ß—Ç–æ —ç—Ç–æ? (–®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂)](#—á—Ç–æ-—ç—Ç–æ-—à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π-–Ω–æ–∂)
2. [–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ)](#—Ç–∏–ø—ã-–¥–∞–Ω–Ω—ã—Ö)
3. [–û–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å (Single Threaded)](#–æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å)
4. [–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫ (RDB vs AOF)](#—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–∞-–¥–∏—Å–∫-rdb-vs-aof)

---

## 1. ü§î –ß—Ç–æ —ç—Ç–æ? (–®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂)

**Redis** ‚Äî —ç—Ç–æ —Å—É–ø–µ—Ä-–±—ã—Å—Ç—Ä–æ–µ In-Memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ **–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ**.
–û–Ω–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–æ–µ (–º–∏–ª–ª–∏–æ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–µ–∫—É–Ω–¥—É), —á—Ç–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ **–ö—ç—à**.

–ù–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ "—Ç—É–ø–æ–π" –∫—ç—à (–∫–∞–∫ Memcached). Redis ‚Äî —ç—Ç–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ —Å–µ—Ç–∏.

---

## 2. üß± –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

–í Redis –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏, —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

### üßµ String (–°—Ç—Ä–æ–∫–∞)
–°–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ. –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç–µ–∫—Å—Ç–æ–º, —á–∏—Å–ª–æ–º –∏–ª–∏ –¥–∞–∂–µ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π (–¥–æ 512 –ú–±).
*   `SET key "value"`
*   `INCR counter` (–ê—Ç–æ–º–∞—Ä–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç!)

### üìù List (–°–ø–∏—Å–æ–∫)
–°–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫ (Linked List). –ë—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü.
*   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: –û—á–µ—Ä–µ–¥–µ–π (Job Queue), –õ–µ–Ω—Ç –Ω–æ–≤–æ—Å—Ç–µ–π.
*   `LPUSH`, `RPOP`.

### üéí Set (–ú–Ω–æ–∂–µ—Å—Ç–≤–æ)
–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏. –ü–æ—Ä—è–¥–æ–∫ –Ω–µ –≤–∞–∂–µ–Ω.
*   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: "–°–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö IP –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π", "–î—Ä—É–∑—å—è", "–¢–µ–≥–∏".
*   `SADD`, `SISMEMBER`.

### üî¢ Sorted Set (ZSet - –£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ)
–¢–æ—Ç –∂–µ Set, –Ω–æ —É –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –µ—Å—Ç—å **Score** (—á–∏—Å–ª–æ).
*   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: **–¢–∞–±–ª–∏—Ü –ª–∏–¥–µ—Ä–æ–≤** (Leaderboards), –û—á–µ—Ä–µ–¥–µ–π —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º.
*   `ZADD player 1000`.

### üó∫Ô∏è Hash (–•–µ—à)
–°–ª–æ–≤–∞—Ä—å –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–≤–∞—Ä—è. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤.
*   `HSET user:100 name "Ivan" age 25`.

```mermaid
graph LR
    Key[–ö–ª—é—á: user:100] --> Hash{Hash}
    Hash --> F1[name: Ivan]
    Hash --> F2[age: 25]
```

---

## 3. ‚ö° –û–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

Redis (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π) —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **–æ–¥–∏–Ω –ø–æ—Ç–æ–∫**.
*   **–ü–ª—é—Å**: –ù–µ—Ç –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Race Conditions), –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã. `INCR` –±–µ–∑–æ–ø–∞—Å–µ–Ω –±–µ–∑ –ª–æ–∫–æ–≤.
*   **–ú–∏–Ω—É—Å**: –ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–Ω—É —Ç—è–∂–µ–ª—É—é –∫–æ–º–∞–Ω–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `KEYS *` –Ω–∞ –º–∏–ª–ª–∏–æ–Ω –∫–ª—é—á–µ–π), –≤–µ—Å—å —Å–µ—Ä–≤–µ—Ä –≤—Å—Ç–∞–Ω–µ—Ç –∫–æ–ª–æ–º –∏ –Ω–µ –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∏–∫–æ–º—É.

> [!WARNING]
> –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `KEYS *` –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ! –û–Ω–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç Redis. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SCAN`.

---

## 4. üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫ (RDB vs AOF)

Redis –∂–∏–≤–µ—Ç –≤ –ø–∞–º—è—Ç–∏. –ï—Å–ª–∏ –≤—ã–¥–µ—Ä–Ω—É—Ç—å —à–Ω—É—Ä ‚Äî –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø–∞–¥—É—Ç. –ß—Ç–æ–±—ã —ç—Ç–æ–≥–æ –Ω–µ —Å–ª—É—á–∏–ª–æ—Å—å, –µ—Å—Ç—å –¥–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞:

### üì∏ RDB (Snapshots)
–î–µ–ª–∞–µ—Ç "—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é" –≤—Å–µ–π –ø–∞–º—è—Ç–∏ —Ä–∞–∑ –≤ N –º–∏–Ω—É—Ç.
*   **–ü–ª—é—Å—ã**: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–∞–π–ª, –±—ã—Å—Ç—Ä–æ –≥—Ä—É–∑–∏—Ç—Å—è.
*   **–ú–∏–Ω—É—Å—ã**: –ú–æ–∂–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç (–º–µ–∂–¥—É —Å–Ω–∏–º–∫–∞–º–∏).

### üìù AOF (Append Only File)
–ü–∏—à–µ—Ç –∫–∞–∂–¥—É—é –∫–æ–º–∞–Ω–¥—É (`SET`, `INCR`) –≤ –ª–æ–≥ —Ñ–∞–π–ª. –ü—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ –ø—Ä–æ—Å—Ç–æ "–ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç" –ª–æ–≥ –∑–∞–Ω–æ–≤–æ.
*   **–ü–ª—é—Å—ã**: –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (fsync –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É).
*   **–ú–∏–Ω—É—Å—ã**: –§–∞–π–ª –±–æ–ª—å—à–æ–π, —Ä–µ—Å—Ç–∞—Ä—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ.

> [!TIP]
> **Best Practice**: –í–∫–ª—é—á–∞—Ç—å –∏ RDB, –∏ AOF. RDB –¥–ª—è –±—ç–∫–∞–ø–æ–≤, AOF –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.

---

## üí° –ò—Ç–æ–≥
*   –ù—É–∂–µ–Ω –∫—ç—à? **Redis**.
*   –ù—É–∂–Ω–∞ –æ—á–µ—Ä–µ–¥—å? **Redis** (List/Streams).
*   –ù—É–∂–µ–Ω –ª–∏–¥–µ—Ä–±–æ—Ä–¥? **Redis** (Sorted Set).
*   –ù—É–∂–Ω–æ Pub/Sub? **Redis**.
–≠—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–ª–µ–π –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.