### üì¨ –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–∞–Ω–∞–ª—ã –≤ Go?

–ö–∞–Ω–∞–ª—ã (channels) ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –≤ Go –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏ (goroutines). –û–Ω–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é CSP (Communicating Sequential Processes), –≥–¥–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –æ–±—â–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª—ã, –∞ –Ω–µ —á–µ—Ä–µ–∑ –æ–±—â—É—é –ø–∞–º—è—Ç—å. –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø: "–ù–µ –æ–±—â–∞–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ –æ–±—â—É—é –ø–∞–º—è—Ç—å, –¥–µ–ª–∏—Ç–µ—Å—å –ø–∞–º—è—Ç—å—é —á–µ—Ä–µ–∑ –æ–±—â–µ–Ω–∏–µ".

–ö–∞–Ω–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ make –∏ –∏–º–µ—é—Ç —Ç–∏–ø chan T, –≥–¥–µ T ‚Äî —ç—Ç–æ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª.

–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞:

```Go
ch := make(chan int) // –∫–∞–Ω–∞–ª –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª
```

---

### ‚öôÔ∏è –ö–∞–∫ –∫–∞–Ω–∞–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?

–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ –∫–∞–Ω–∞–ª –≤ Go –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π **hchan** (–≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö `runtime/chan.go`). –û–Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—è–º–∏ –≥–æ—Ä—É—Ç–∏–Ω –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö.

```go
type hchan struct {
    qcount   uint           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –±—É—Ñ–µ—Ä–µ
    dataqsiz uint           // –†–∞–∑–º–µ—Ä –∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞
    buf      unsafe.Pointer // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±—É—Ñ–µ—Ä (–º–∞—Å—Å–∏–≤)
    elemsize uint16         // –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
    closed   uint32         // –§–ª–∞–≥ –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–Ω–∞–ª–∞
    elemtype *_type         // –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞–Ω–∞–ª–µ
    sendx    uint           // –ò–Ω–¥–µ–∫—Å –¥–ª—è –∑–∞–ø–∏—Å–∏ (–¥–ª—è –±—É—Ñ–µ—Ä–∞)
    recvx    uint           // –ò–Ω–¥–µ–∫—Å –¥–ª—è —á—Ç–µ–Ω–∏—è (–¥–ª—è –±—É—Ñ–µ—Ä–∞)
    recvq    waitq          // –°–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
    sendq    waitq          // –°–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π
    lock     mutex          // –ú—å—é—Ç–µ–∫—Å –¥–ª—è –∑–∞—â–∏—Ç—ã –≤—Å–µ—Ö –ø–æ–ª–µ–π hchan
}
```

**–°—Ö–µ–º–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã hchan:**
```mermaid
graph TD
    subgraph hchan ["–°—Ç—Ä—É–∫—Ç—É—Ä–∞ hchan"]
        A[buf: –ö–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä]
        B[sendq: –û—á–µ—Ä–µ–¥—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π]
        C[recvq: –û—á–µ—Ä–µ–¥—å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π]
        D[lock: –ú—å—é—Ç–µ–∫—Å]
        E[qcount / dataqsiz]
    end
    B --> B1[sudog 1] --> B2[sudog 2]
    C --> C1[sudog 1] --> C2[sudog 2]
```

> [!IMPORTANT]
> –ö–∞–Ω–∞–ª ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑–∞—Ç–µ–ª—å (`*hchan`). –ö–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –∫–∞–Ω–∞–ª –≤ —Ñ—É–Ω–∫—Ü–∏—é, –≤—ã –∫–æ–ø–∏—Ä—É–µ—Ç–µ –∞–¥—Ä–µ—Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–æ—ç—Ç–æ–º—É –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–¥–Ω–∏–º–∏ –∏ —Ç–µ–º–∏ –∂–µ –æ—á–µ—Ä–µ–¥—è–º–∏ –∏ –±—É—Ñ–µ—Ä–æ–º.

#### –ß—Ç–æ —Ç–∞–∫–æ–µ `lock`?
–õ—é–±–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å –∫–∞–Ω–∞–ª–æ–º (–∑–∞–ø–∏—Å—å, —á—Ç–µ–Ω–∏–µ, –∑–∞–∫—Ä—ã—Ç–∏–µ) –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞—Ö–≤–∞—Ç–∞ **lock**. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –∫–∞–Ω–∞–ª—ã –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã.

---

### üìÇ –¢–∏–ø—ã –∫–∞–Ω–∞–ª–æ–≤

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä—ë–º —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ –∫–∞–Ω–∞–ª–æ–≤: –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ nil-–∫–∞–Ω–∞–ª—ã.

#### 1. ‚ö° –ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

- **–°–æ–∑–¥–∞–Ω–∏–µ**: ch := make(chan int) (–±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞).

- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ —Ä–∞–≤–µ–Ω 0 (dataqsiz = 0), —Ç–æ –µ—Å—Ç—å –≤ –∫–∞–Ω–∞–ª–µ –Ω–µ—Ç –º–µ—Å—Ç–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ (ch <- value) –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –ø–æ–∫–∞ –¥—Ä—É–≥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏—é —á—Ç–µ–Ω–∏—è (<-ch).
  - –û–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è (<-ch) –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É-–ø–æ–ª—É—á–∞—Ç–µ–ª—è, –ø–æ–∫–∞ –¥—Ä—É–≥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç –∑–∞–ø–∏—Å—å.
  - –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞–ø—Ä—è–º—É—é –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏ (–±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è), —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**.

- **–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º**:
  - –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å–∞—Ç—å –≤ –∫–∞–Ω–∞–ª (`ch <- value`), –∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –Ω–µ—Ç, –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å **sendq** –∏ ¬´–∑–∞—Å—ã–ø–∞–µ—Ç¬ª.
  - –ï—Å–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å (`<-ch`), –∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –Ω–µ—Ç, –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å **recvq** –∏ —Ç–æ–∂–µ –∑–∞—Å—ã–ø–∞–µ—Ç.
  - **Direct Copy**: –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç), –¥–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è **–Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å—Ç–µ–∫–∞ –≤ —Å—Ç–µ–∫** –≥–æ—Ä—É—Ç–∏–Ω—ã, –º–∏–Ω—É—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –±—É—Ñ–µ—Ä. –≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π Go.

**–°—Ö–µ–º–∞ Direct Copy (–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞):**
```mermaid
sequenceDiagram
    participant G1 as Goroutine A (Sender)
    participant G2 as Goroutine B (Receiver)
    Note over G1, G2: –ü—Ä—è–º–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ —Å—Ç–µ–∫–∞ –≤ —Å—Ç–µ–∫
    G1->>G2: memmove(dst, src, size)
    G1-->>G1: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
    G2-->>G2: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
```

–ü—Ä–∏–º–µ—Ä:

```Go
func main() {
    ch := make(chan int)
    go func() {
        ch <- 42 // –∑–∞–ø–∏—Å—å –±–ª–æ–∫–∏—Ä—É–µ—Ç, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç —á—Ç–µ–Ω–∏—è
    }()
    fmt.Println(<-ch) // —á—Ç–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
}
```

- **–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –∏–¥–µ–∞–ª—å–Ω—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞ —Ä–∞–±–æ—Ç—É, –ø—Ä–µ–∂–¥–µ —á–µ–º –¥—Ä—É–≥–∞—è –Ω–∞—á–Ω—ë—Ç.

---

#### 2. üì¶ –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

- **–°–æ–∑–¥–∞–Ω–∏–µ**: ch := make(chan int, 3) (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞, –∑–¥–µ—Å—å 3).

- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –ö–∞–Ω–∞–ª –∏–º–µ–µ—Ç –±—É—Ñ–µ—Ä —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (dataqsiz > 0), –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ—Ä—è–¥–∫–µ FIFO (first-in, first-out).

- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ (ch <- value) –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è, –µ—Å–ª–∏ –≤ –±—É—Ñ–µ—Ä–µ –µ—Å—Ç—å –º–µ—Å—Ç–æ. –ï—Å–ª–∏ –±—É—Ñ–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è –º–µ—Å—Ç–æ.
  - –û–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è (<-ch) –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è, –µ—Å–ª–∏ –≤ –±—É—Ñ–µ—Ä–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ. –ï—Å–ª–∏ –±—É—Ñ–µ—Ä –ø—É—Å—Ç, –ø–æ–ª—É—á–∞—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –ø–æ—è–≤—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ.
  - –≠—Ç–æ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**, –ø–æ–∫–∞ –±—É—Ñ–µ—Ä –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –∏–ª–∏ –Ω–µ –æ–ø—É—Å—Ç–æ—à—ë–Ω.

- **–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º**:
  - –ë—É—Ñ–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ **–∫–æ–ª—å—Ü–µ–≤–æ–π –º–∞—Å—Å–∏–≤** (**buf**), –≥–¥–µ **sendx** —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –∑–∞–ø–∏—Å–∏, –∞ **recvx** ‚Äî –¥–ª—è —á—Ç–µ–Ω–∏—è.
  - –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –±—É—Ñ–µ—Ä, **sendx** —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –±—É—Ñ–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ **sendq** –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.
  - –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –±—É—Ñ–µ—Ä–∞, **recvx** —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –±—É—Ñ–µ—Ä –ø—É—Å—Ç, –ø–æ–ª—É—á–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ **recvq** –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.
  - –ú—å—é—Ç–µ–∫—Å (**lock**) –∑–∞—â–∏—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –±—É—Ñ–µ—Ä—É –æ—Ç –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö.

**–°—Ö–µ–º–∞ –∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞:**
```mermaid
graph LR
    subgraph Buffer ["buf (–ú–∞—Å—Å–∏–≤)"]
        S0[Slot 0]
        S1[Slot 1]
        S2[Slot 2]
        S3[Slot 3]
    end
    recvx((recvx)) --> S1
    sendx((sendx)) --> S3
    style S1 fill:#f96,stroke:#333,stroke-width:2px
    style S2 fill:#f96,stroke:#333,stroke-width:2px
```

–ü—Ä–∏–º–µ—Ä:

```Go
func main() {
    ch := make(chan int, 2)
    ch <- 1 // –±—É—Ñ–µ—Ä: [1]
    ch <- 2 // –±—É—Ñ–µ—Ä: [1, 2]// ch <- 3 // –∑–¥–µ—Å—å –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, —Ç.–∫. –±—É—Ñ–µ—Ä –ø–æ–ª–æ–Ω (—Ä–∞–∑–º–µ—Ä 2)
    fmt.Println(<-ch) // –±—É—Ñ–µ—Ä: [2]
    fmt.Println(<-ch) // –±—É—Ñ–µ—Ä: –ø—É—Å—Ç
}
```

- **–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø–æ–ª–µ–∑–Ω—ã, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

#### 3. üö´ Nil-–∫–∞–Ω–∞–ª—ã

- **–°–æ–∑–¥–∞–Ω–∏–µ**: var ch chan int (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–Ω–∞–ª —Ä–∞–≤–µ–Ω nil, –µ—Å–ª–∏ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ make).

- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ chan T. –ù–µ–ª—å–∑—è –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏–ª–∏ —á–∏—Ç–∞—Ç—å –∏–∑ nil-–∫–∞–Ω–∞–ª–∞.

- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ (ch <- value) –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞.
  - –û–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è (<-ch) –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞.
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ select:
    - –ï—Å–ª–∏ –≤ select –µ—Å—Ç—å –≤–µ—Ç–∫–∞ —Å nil-–∫–∞–Ω–∞–ª–æ–º, –æ–Ω–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω–∞ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è).

- **–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º**:
  - Nil-–∫–∞–Ω–∞–ª ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å nil –≤–º–µ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã hchan. Runtime –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —ç—Ç–æ –∏ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≥–æ—Ä—É—Ç–∏–Ω—É –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.

–ü—Ä–∏–º–µ—Ä:

```Go
func main() {
    var ch chan int // ch == nil
    go func() {
        ch <- 42 // –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞
    }()
    fmt.Println(<-ch) // –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞
}
```

- **–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: Nil-–∫–∞–Ω–∞–ª—ã —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö —Å select –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä:

```Go
func main() {
    ch1 := make(chan int)
    var ch2 chan int // nil
    select {
    case <-ch1:
        fmt.Println("ch1")
    case <-ch2: // —ç—Ç–∞ –≤–µ—Ç–∫–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, —Ç.–∫. ch2 == nil
        fmt.Println("ch2")
    }
}
```

---

#### üèÅ –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–∞–Ω–∞–ª–æ–≤

- –ö–∞–Ω–∞–ª—ã –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å –ø–æ–º–æ—â—å—é close(ch).

- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞–ø–∏—Å—å –≤ –∫–∞–Ω–∞–ª –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É.
  - –ß—Ç–µ–Ω–∏–µ –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0 –¥–ª—è int) –∏ ok == false –≤ —Å–ª—É—á–∞–µ value, ok := <-ch.
  - –ó–∞–∫—Ä—ã—Ç–∏–µ nil-–∫–∞–Ω–∞–ª–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É.

- **–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º**: –ü—Ä–∏ –≤—ã–∑–æ–≤–µ close runtime —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ hchan –∏ –±—É–¥–∏—Ç –≤—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∏–∑ recvq –∏ sendq, —Å–æ–æ–±—â–∞—è –∏–º –æ –∑–∞–∫—Ä—ã—Ç–∏–∏.

–ü—Ä–∏–º–µ—Ä:

```Go
func main() {
    ch := make(chan int, 1)
    ch <- 42
    close(ch)
    v, ok := <-ch
    fmt.Println(v, ok) // 42 true
    v, ok = <-ch
    fmt.Println(v, ok) // 0 false
}
```

---

## üÖøÔ∏è –ü–∞—Ä–∫–æ–≤–∫–∞ –≥–æ—Ä—É—Ç–∏–Ω (Gopark –∏ Goready)

–ö–æ–≥–¥–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∏—à–µ—Ç –≤ –ø–æ–ª–Ω—ã–π –∫–∞–Ω–∞–ª), –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ ¬´–∑–∞–ø–∞–∫–æ–≤–∞—Ç—å—Å—è¬ª (–æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ç—Ä–µ–¥). –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **parking**.

### –û—á–µ—Ä–µ–¥–∏ –æ–∂–∏–¥–∞–Ω–∏—è (sendq –∏ recvq)
–≠—Ç–æ –¥–≤—É—Å–≤—è–∑–Ω—ã–µ —Å–ø–∏—Å–∫–∏, —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã **sudog**.
- **sudog** ‚Äî —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ –≥–æ—Ä—É—Ç–∏–Ω–æ–π (**G**), –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫–∞–∫–æ–π —ç–ª–µ–º–µ–Ω—Ç –æ–Ω–∞ —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å.

### –ê–ª–≥–æ—Ä–∏—Ç–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (gopark):
1. –ì–æ—Ä—É—Ç–∏–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É **sudog**.
2. –ü–æ–º–µ—â–∞–µ—Ç –µ—ë –≤ **sendq** (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è) –∏–ª–∏ **recvq** (–¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è) –∫–∞–Ω–∞–ª–∞.
3. –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `gopark`.
4. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go —Å–Ω–∏–º–∞–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Ç—Ä–µ–¥ **M** –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –¥—Ä—É–≥—É—é –≥–æ—Ä—É—Ç–∏–Ω—É).
5. –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `waiting`.

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è (goready):
1. –î—Ä—É–≥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–µ—Ä–≤—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Å—Ç–∏—Ç –±—É—Ñ–µ—Ä).
2. –û–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç **sudog** –≤ –æ—á–µ—Ä–µ–¥–∏ –∫–∞–Ω–∞–ª–∞.
3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç **G** –∏–∑ **sudog**.
4. –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `goready`.
5. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≥–æ—Ä—É—Ç–∏–Ω—É –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `runnable`, –∏ –æ–Ω–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (LRQ/GRQ).

> [!TIP]
> **–í–∞–∂–Ω–æ**: –ì–æ—Ä—É—Ç–∏–Ω—ã –Ω–µ ¬´–ø—Ä–æ—Å—ã–ø–∞—é—Ç—Å—è¬ª —Å–∞–º–∏. –ò—Ö –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π (—Ç–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–¥–µ–ª–∞–ª–∞ —á—Ç–µ–Ω–∏–µ –∏–ª–∏ –∑–∞–ø–∏—Å—å, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–≤—à—É—é –æ—á–µ—Ä–µ–¥—å).

**–°—Ö–µ–º–∞ –ø–∞—Ä–∫–æ–≤–∫–∏ –∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è:**
```mermaid
graph TD
    G_Active[–ê–∫—Ç–∏–≤–Ω–∞—è G1] -- ch <- value (Full) --> P[gopark]
    P --> Wait[G1 –≤ waiting, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ sendq]
    Wait -- G2 —á–∏—Ç–∞–µ—Ç –∏–∑ –∫–∞–Ω–∞–ª–∞ --> Ready[goready G1]
    Ready --> RQ[G1 –≤ runqueue]
    RQ --> G_Active2[G1 –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É]
```

---

### üéØ –ò—Ç–æ–≥

1. **–ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã**: –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ, —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –ø—Ä—è–º—É—é –∫–æ–ø–∏—é –º–µ–∂–¥—É —Å—Ç–µ–∫–∞–º–∏.
2. **–ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –¥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±—É—Ñ–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤/–∏–∑ –Ω–µ–≥–æ.
3. **Nil-–∫–∞–Ω–∞–ª—ã**: –í—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç –≥–æ—Ä—É—Ç–∏–Ω—É –Ω–∞–≤—Å–µ–≥–¥–∞ (–≤—ã–∑—ã–≤–∞—é—Ç `gopark` –±–µ–∑ —à–∞–Ω—Å–∞ –Ω–∞ `goready`).
4. **–ó–∞–∫—Ä—ã—Ç–∏–µ**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `closed` –∏ –±—É–¥–∏—Ç –≤—Å–µ—Ö –∂–¥—É—â–∏—Ö (–æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è).
5. **Sudog**: –ö–ª—é—á–µ–≤–æ–µ —Å–≤—è–∑—É—é—â–µ–µ –∑–≤–µ–Ω–æ –º–µ–∂–¥—É –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º –∏ –∫–∞–Ω–∞–ª–∞–º–∏.
