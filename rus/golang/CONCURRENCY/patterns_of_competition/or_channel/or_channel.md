### üö¶ –ü–∞—Ç—Ç–µ—Ä–Ω Or-Channel

**Or-Channel** ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤ –≤ –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –∫–∞–Ω–∞–ª. –≠—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –∫–∞–Ω–∞–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–ª—é–±–æ–π** –∏–∑ –≤—Ö–æ–¥—è—â–∏—Ö –∫–∞–Ω–∞–ª–æ–≤. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç–º–µ–Ω—ã –∏–ª–∏ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –∏–∑ –≥—Ä—É–ø–ø—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

---

### üß† –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–≤–∞—Ä–∏–π–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –∑–¥–∞–Ω–∏—è. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞–∂–∞—Ç–∞ **–ª—é–±–∞—è** –∏–∑ –Ω–∏—Ö, –≤–∫–ª—é—á–∞–µ—Ç—Å—è –æ–±—â–∞—è —Ç—Ä–µ–≤–æ–≥–∞.

```mermaid
graph TD
    Ch1[Channel 1] --> Or((Or-Join))
    Ch2[Channel 2] --> Or
    Ch3[Channel 3] --> Or
    Or --> Out[Result: Close if any closed]
```

---

### üíª –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

–í Go —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω —á–∞—Å—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤ –æ—á–µ–Ω—å –ª–∞–∫–æ–Ω–∏—á–Ω–æ.

```go
package main

import (
	"fmt"
	"time"
)

// or —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∫–∞–Ω–∞–ª—ã –≤ –æ–¥–∏–Ω
// or recursively combines channels into one
func or(channels ...<-chan interface{}) <-chan interface{} {
	// –ë–∞–∑–æ–≤—ã–µ —Å–ª—É—á–∞–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∫—É—Ä—Å–∏–∏
	switch len(channels) {
	case 0:
		return nil
	case 1:
		return channels[0]
	}

	orDone := make(chan interface{})

	go func() {
		defer close(orDone)

		switch len(channels) {
		case 2:
			// –û–∂–∏–¥–∞–Ω–∏–µ –ª—é–±–æ–≥–æ –∏–∑ –¥–≤—É—Ö
			select {
			case <-channels[0]:
			case <-channels[1]:
			}
		default:
			// –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –ª—é–±–æ–≥–æ –∏–∑ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
			select {
			case <-channels[0]:
			case <-channels[1]:
			case <-channels[2]:
			case <-or(append(channels[3:], orDone)...):
			}
		}
	}()

	return orDone
}

func main() {
	// sig —Å–æ–∑–¥–∞–µ—Ç –∫–∞–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
	// sig creates a channel that will close after the specified duration
	sig := func(after time.Duration) <-chan interface{} {
		c := make(chan interface{})
		go func() {
			defer close(c)
			time.Sleep(after)
		}()
		return c
	}

	start := time.Now()

	fmt.Println("–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∞–º–æ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ –∫–∞–Ω–∞–ª–∞...")
	// Waiting for the fastest channel to close...

	// –ñ–¥–µ–º, –ø–æ–∫–∞ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –ª—é–±–æ–π –∏–∑ —ç—Ç–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
	<-or(
		sig(2*time.Hour),
		sig(5*time.Minute),
		sig(1*time.Second), // –≠—Ç–æ—Ç –∑–∞–∫—Ä–æ–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
		sig(1*time.Hour),
	)

	fmt.Printf("–ì–æ—Ç–æ–≤–æ —á–µ—Ä–µ–∑ %v\n", time.Since(start))
}
```

---

### üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–†–µ–∫—É—Ä—Å–∏—è**: –ü–æ–∑–≤–æ–ª—è–µ—Ç —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤.
2. **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è**: –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ `or` ‚Äî —ç—Ç–æ —Ç–∞–∫–æ–π –∂–µ –∫–∞–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ `or`.
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∫–∞–Ω–∞–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏—è –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –≥–ª—É–±–æ–∫–∏–π —Å—Ç–µ–∫ –≥–æ—Ä—É—Ç–∏–Ω, –Ω–æ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∑–∞–¥–∞—á —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ.

> [!TIP]
> –≠—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –æ—Ç–º–µ–Ω—ã –∑–∞–¥–∞—á, –≥–¥–µ –Ω—É–∂–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–∏–≥–Ω–∞–ª—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.
