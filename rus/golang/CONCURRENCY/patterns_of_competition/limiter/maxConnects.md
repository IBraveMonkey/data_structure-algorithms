### üõ°Ô∏è Limiter: Max Connections

**Max Connections Limiter** ‚Äî —ç—Ç–æ –≤–∞—Ä–∏–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä–∞—è —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∏–ª–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Ç–∫—Ä–æ–µ—Ç –±–æ–ª—å—à–µ —Å–æ–∫–µ—Ç–æ–≤ –∏–ª–∏ –Ω–µ –∑–∞–¥–µ–π—Å—Ç–≤—É–µ—Ç –±–æ–ª—å—à–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, —á–µ–º –º–æ–∂–µ—Ç –≤—ã–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

---

### üß† –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ä–∞–±–æ—Ç—É –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–∞, –≥–¥–µ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ 10 –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. –î–∞–∂–µ –µ—Å–ª–∏ –∑–≤–æ–Ω—è—Ç 100 —á–µ–ª–æ–≤–µ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —Ç–æ–ª—å–∫–æ 10 —Å–º–æ–≥—É—Ç —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±—É–¥—É—Ç –∂–¥–∞—Ç—å –≤ –æ—á–µ—Ä–µ–¥–∏, –ø–æ–∫–∞ –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è –ª–∏–Ω–∏—è.

```mermaid
graph TD
    U[Users/Requests] --> Q[Queue]
    Q --> Pool{Worker Pool: 10}
    Pool --> W1[Worker]
    Pool --> W2[Worker]
    Pool --> WN[Worker 10]
```

---

### üíª –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

–í —ç—Ç–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–≤–æ—Ä–∫–µ—Ä–æ–≤), –∫–æ—Ç–æ—Ä—ã–µ —á–∏—Ç–∞—é—Ç –∏–∑ –æ–±—â–µ–≥–æ –∫–∞–Ω–∞–ª–∞ –∑–∞–¥–∞—á.

```go
package main

import (
	"context"
	"fmt"
	"sync"
	"time"
)

func main() {
	const maxConnections = 3 // –õ–∏–º–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
	const totalRequests = 10

	taskCh := make(chan int, totalRequests)
	var wg sync.WaitGroup

	fmt.Printf("–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã —Å –ª–∏–º–∏—Ç–æ–º %d —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π...\n", maxConnections)
	// Starting system with a limit of 3 connections...

	// –°–æ–∑–¥–∞–µ–º –ø—É–ª –≤–æ—Ä–∫–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–∞—à–∏–º –ª–∏–º–∏—Ç–µ—Ä–æ–º
	// Creating a worker pool that acts as our limiter
	for i := 1; i <= maxConnections; i++ {
		wg.Add(1)
		go func(workerID int) {
			defer wg.Done()
			for taskID := range taskCh {
				fmt.Printf("–í–æ—Ä–∫–µ—Ä %d –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å %d\n", workerID, taskID)
				time.Sleep(500 * time.Millisecond) // –ò–º–∏—Ç–∞—Ü–∏—è —Å–µ—Ç–µ–≤–æ–π —Ä–∞–±–æ—Ç—ã
			}
		}(i)
	}

	// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å—ã
	// Sending requests
	for i := 1; i <= totalRequests; i++ {
		taskCh <- i
	}
	close(taskCh)

	wg.Wait()
	fmt.Println("–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã.")
}
```

---

### üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –∏–ª–∏ –ø–∞–º—è—Ç–∏.
2. **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å**: –í—ã –∏–º–µ–µ—Ç–µ —á–µ—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é —Å–∏—Å—Ç–µ–º—ã.
3. **–û—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å**: –í—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è, –∞ —Å—Ç–∞–≤—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å (–±—É—Ñ–µ—Ä –∫–∞–Ω–∞–ª–∞).

> [!NOTE]
> –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç "–ü—É–ª –≤–æ—Ä–∫–µ—Ä–æ–≤", –∏ –æ–Ω —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∂–µ—Å—Ç–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤ Go.
