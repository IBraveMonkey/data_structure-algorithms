### ‚è±Ô∏è Limiter: RPS (Rate Per Second)

**RPS Limiter** ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö –ª–∏–º–∏—Ç–µ—Ä–æ–≤, –æ–Ω –Ω–∞—Ü–µ–ª–µ–Ω –Ω–µ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã, –∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–Ω–µ—à–Ω–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–∏–º–∏—Ç—ã API ‚Äî "–Ω–µ –±–æ–ª–µ–µ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É").

---

### üß† –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –ø–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã –∏–ª–∏ –¥–æ–∑–∞—Ç–æ—Ä. –î–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Ç–æ–Ω–Ω–∞ –ø–µ—Å–∫–∞, —á–µ—Ä–µ–∑ —É–∑–∫–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ –æ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞ –ø—Ä–∏–µ–º–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ (API) –Ω–µ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.

```mermaid
graph TD
    Burst[Requests Burst] --> Bucket{RPS Limiter: 10/sec}
    Bucket -->|Constant Flow| API[External API]
```

---

### üíª –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

–í Go —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é `time.Ticker`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞–µ—Ç —Ç–µ–º–ø –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```go
package main

import (
	"fmt"
	"time"
)

func main() {
	const rps = 5 // –õ–∏–º–∏—Ç: 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
	const totalTasks = 15

	// –°–æ–∑–¥–∞–µ–º —Ç–∏–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π "—Ç–∏–∫–∞–µ—Ç" –∫–∞–∂–¥—ã–µ 1/rps —Å–µ–∫—É–Ω–¥—ã
	// Creating a ticker that "ticks" every 1/rps seconds
	ticker := time.NewTicker(time.Second / rps)
	defer ticker.Stop()

	fmt.Printf("–ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ %d –∑–∞–¥–∞—á —Å —Ç–µ–º–ø–æ–º %d RPS...\n", totalTasks, rps)
	// Starting processing of 15 tasks at a rate of 5 RPS...

	start := time.Now()

	for i := 1; i <= totalTasks; i++ {
		// –ñ–¥–µ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ "—Ç–∏–∫–∞"
		// Waiting for the next tick
		<-ticker.C
		
		fmt.Printf("[%v] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á–∏ %d\n", time.Since(start).Truncate(time.Millisecond), i)
	}

	fmt.Printf("–ì–æ—Ç–æ–≤–æ! –ò—Ç–æ–≥–æ–≤–æ–µ –≤—Ä–µ–º—è: %v\n", time.Since(start))
}
```

---

### üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç—å**: –û–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –≤–æ –≤—Ä–µ–º–µ–Ω–∏.
2. **–¢–æ—á–Ω–æ—Å—Ç—å**: –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞—Ç—å –ª–∏–º–∏—Ç—ã —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (SLA).
3. **Bursty Traffic**: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å–ø–ª–µ—Å–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 RPS –≤ —Å—Ä–µ–¥–Ω–µ–º, –Ω–æ –¥–æ 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ), —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `golang.org/x/time/rate`.

> [!TIP]
> –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `defer ticker.Stop()`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ —Ç–∞–π–º–µ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞.
