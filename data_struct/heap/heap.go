package heap

/*
Heap — это специализированная структура данных в виде полного бинарного дерева, которая удовлетворяет свойству кучи: в max-heap значение каждого узла больше или равно значениям его потомков, в min-heap — меньше или равно. Используется для быстрого доступа к минимальному или максимальному элементу.

Смысл и применение

Смысл: Обеспечивает эффективное извлечение минимального/максимального элемента (O(log n) для вставки и удаления, O(1) для доступа к корню).

Когда использовать:
Алгоритмы на графах (например, алгоритм Дейкстры, Прима).
Планировщики задач (например, выбор задачи с наивысшим приоритетом).
Реализация очередей с приоритетами.
Сортировка кучей (Heap Sort).

Сложность:
Вставка: O(log n)
Удаление: O(log n)
Доступ к минимуму/максимуму: O(1)
Построение кучи: O(n)
*/

// IntHeap — это наш массив чисел, который станет кучей
type IntHeap []int

// Len — возвращает количество элементов
func (h IntHeap) Len() int { return len(h) }

// Less — сравнивает элементы (для min-heap: i < j)
func (h IntHeap) Less(i, j int) bool { return h[i] < h[j] }

// Swap — меняет элементы местами
func (h IntHeap) Swap(i, j int) { h[i], h[j] = h[j], h[i] }

// Push — добавляет элемент в конец
func (h *IntHeap) Push(x interface{}) {
	*h = append(*h, x.(int))
}

// Pop — убирает и возвращает последний элемент (корень уже извлечён)
func (h *IntHeap) Pop() interface{} {
	old := *h
	n := len(old)
	x := old[n-1]
	*h = old[0 : n-1]
	return x
}
