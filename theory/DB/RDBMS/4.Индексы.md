# üîé 4. –ò–Ω–¥–µ–∫—Å—ã (Indexes)

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–¥–µ–∫—Å?](#—á—Ç–æ-—Ç–∞–∫–æ–µ-–∏–Ω–¥–µ–∫—Å)
2. [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
3. [–¢–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤](#—Ç–∏–ø—ã-–∏–Ω–¥–µ–∫—Å–æ–≤)
4. [Trade-off: –ß—Ç–µ–Ω–∏–µ vs –ó–∞–ø–∏—Å—å](#trade-off-—á—Ç–µ–Ω–∏–µ-vs-–∑–∞–ø–∏—Å—å)

---

## 1. ü§î –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–¥–µ–∫—Å?

**–ò–Ω–¥–µ–∫—Å** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–±–∏—Ä–∞—è –≤—Å—é —Ç–∞–±–ª–∏—Ü—É –ø–æ–¥—Ä—è–¥ (Full Scan).

> [!NOTE]
> **–ê–Ω–∞–ª–æ–≥–∏—è**: –ö–∞—Ä—Ç–æ—Ç–µ–∫–∞ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.
> *   –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ (Full Scan): –ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –∫–Ω–∏–≥—É *–¢–æ–ª—Å—Ç–æ–≥–æ*, –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –≤–¥–æ–ª—å –≤—Å–µ—Ö –ø–æ–ª–æ–∫ –∏ —Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∂–¥—É—é –∫–Ω–∏–≥—É.
> *   –° –∏–Ω–¥–µ–∫—Å–æ–º: –í—ã –∏–¥–µ—Ç–µ –∫ —è—â–∏–∫—É —Å –±—É–∫–≤–æ–π "–¢", –Ω–∞—Ö–æ–¥–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É "–¢–æ–ª—Å—Ç–æ–π" –∏ —Ç–∞–º –Ω–∞–ø–∏—Å–∞–Ω —Ç–æ—á–Ω—ã–π –Ω–æ–º–µ—Ä –ø–æ–ª–∫–∏.

---

## 2. ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Ç–∞–±–ª–∏—Ü—É `Users` —Å 1,000,000 —Å—Ç—Ä–æ–∫.
–ó–∞–ø—Ä–æ—Å: `SELECT * FROM Users WHERE email = 'bob@x.com'`

### –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞
–°–£–ë–î —á–∏—Ç–∞–µ—Ç 1-—é —Å—Ç—Ä–æ–∫—É, —Å–º–æ—Ç—Ä–∏—Ç email. –ß–∏—Ç–∞–µ—Ç 2-—é... –ò —Ç–∞–∫ –¥–æ 1,000,000-–π.
–°–ª–æ–∂–Ω–æ—Å—Ç—å: **O(N)**. –ú–µ–¥–ª–µ–Ω–Ω–æ!

### –° –∏–Ω–¥–µ–∫—Å–æ–º
–°–£–ë–î –∏–¥–µ—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–Ω–¥–µ–∫—Å–∞ (–æ–±—ã—á–Ω–æ —ç—Ç–æ –¥–µ—Ä–µ–≤–æ), –¥–µ–ª–∞–µ—Ç –ø–∞—Ä—É –ø—Ä—ã–∂–∫–æ–≤ –∏ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞–µ—Ç –∞–¥—Ä–µ—Å –Ω—É–∂–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –¥–∏—Å–∫–µ.
–°–ª–æ–∂–Ω–æ—Å—Ç—å: **O(log N)**. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ!

---

## 3. üå≥ –¢–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤

### B-Tree (–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ)
–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π, –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å (`CREATE INDEX`).
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
*   –¢–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (`=`)
*   –î–∏–∞–ø–∞–∑–æ–Ω–æ–≤ (`>`, `<`, `BETWEEN`)
*   –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (`ORDER BY`)

```mermaid
graph TD
    Root((50)) --> L1((10))
    Root --> R1((80))
    L1 --> LL1(1..9)
    L1 --> LR1(11..49)
    R1 --> RL1(51..79)
    R1 --> RR1(81..100)
```
*–î–∞–Ω–Ω—ã–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã, –ø–æ—ç—Ç–æ–º—É –ø–æ–∏—Å–∫ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π.*

### Hash Index
–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –•—ç—à-—Ç–∞–±–ª–∏—Ü–∞.
–ü–æ–¥—Ö–æ–¥–∏—Ç **—Ç–æ–ª—å–∫–æ** –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (`=`).
*   –ù–µ —É–º–µ–µ—Ç –∏—Å–∫–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã (`> 50`).
*   –í Postgres –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ.

### GIN / GiST (–°–ø–µ—Ü–∏—Ñ–∏–∫–∞ PostgreSQL)
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
*   **GIN (Generalized Inverted Index)**: –î–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–∫–∞–∫ –≤ Google) –∏ JSONB (–ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–∞–º –≤–Ω—É—Ç—Ä–∏ JSON).
*   **GiST**: –î–ª—è –≥–µ–æ–º–µ—Ç—Ä–∏–∏ (–Ω–∞–π—Ç–∏ –≤—Å–µ –∫–∞—Ñ–µ –≤ —Ä–∞–¥–∏—É—Å–µ 1–∫–º), –º–∞—Å—Å–∏–≤–æ–≤.

---

## 4. ‚öñÔ∏è Trade-off: –ß—Ç–µ–Ω–∏–µ vs –ó–∞–ø–∏—Å—å

–ü–æ—á–µ–º—É –±—ã –Ω–µ —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ *–≤—Å–µ* –∫–æ–ª–æ–Ω–∫–∏?

1.  **–ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (INSERT / UPDATE / DELETE)**:
    *   –ö–æ–≥–¥–∞ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—Ü—É, –°–£–ë–î –¥–æ–ª–∂–Ω–∞ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å –∏ –≤–æ **–í–°–ï** –∏–Ω–¥–µ–∫—Å—ã. –ï—Å–ª–∏ —É –≤–∞—Å 10 –∏–Ω–¥–µ–∫—Å–æ–≤ ‚Äî –æ–¥–Ω–∞ –≤—Å—Ç–∞–≤–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ 11 –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏.
2.  **–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ**:
    *   –ò–Ω–¥–µ–∫—Å—ã –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ. –ò–Ω–æ–≥–¥–∞ –∏–Ω–¥–µ–∫—Å –≤–µ—Å–∏—Ç –±–æ–ª—å—à–µ —Å–∞–º–æ–π —Ç–∞–±–ª–∏—Ü—ã.

> [!TIP]
> **–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ**:
> –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ –ø–æ–ª—è, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –≤—ã —á–∞—Å—Ç–æ –¥–µ–ª–∞–µ—Ç–µ **–ø–æ–∏—Å–∫** (`WHERE`), **—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É** (`ORDER BY`) –∏–ª–∏ **—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** (`JOIN`). –ù–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ –≤—Å—ë –ø–æ–¥—Ä—è–¥.
