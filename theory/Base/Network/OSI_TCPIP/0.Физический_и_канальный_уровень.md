**Физический и канальный уровни** модели OSI (и уровня доступа к сети в модели TCP/IP) отвечают за передачу данных на самом низком уровне — от физической передачи битов до формирования кадров. Эти уровни обеспечивают основу для работы сетей, включая локальные (LAN) и беспроводные соединения. Этот конспект описывает, как данные передаются физически, роль адресов MAC, технологии Ethernet, коммутаторов, а также такие понятия, как коллизии и кадры.

---

## Как данные передаются физически

**Физический уровень** (Physical Layer) отвечает за передачу необработанных битов (0 и 1) через физическую среду. Он определяет, как сигналы кодируются, передаются и принимаются.

### Среды передачи

- **Проводные**:
  - **Медные кабели**: Витая пара (Cat5e, Cat6) для Ethernet. Передача через электрические сигналы.
  - **Оптоволокно**: Передача данных световыми импульсами. Высокая скорость, устойчивость к помехам.
  - **Коаксиальный кабель**: Используется в старых сетях или кабельном телевидении.
- **Беспроводные**:
  - **Wi-Fi**: Радиоволны по стандартам IEEE 802.11 (a/b/g/n/ac/ax).
  - **Bluetooth**: Радиоволны для коротких расстояний.
  - **Мобильные сети**: 4G/5G для передачи данных через сотовые вышки.
  - **Инфракрасные**: Устаревший метод для устройств на коротких расстояниях.

### Задачи физического уровня

- Определение характеристик среды: напряжение, частота, тип разъёмов (RJ45, LC).
- Кодирование данных: Преобразование битов в сигналы (например, Manchester encoding).
- Синхронизация: Обеспечение точного времени для передачи и приёма.

**Пример**: В локальной сети витая пара передаёт электрические сигналы от компьютера к коммутатору, где биты кодируются в соответствии со стандартом Ethernet.

---

## Адреса управления доступом к среде (MAC) и технология Ethernet

**Канальный уровень** (Data Link Layer) формирует из битов **кадры** (frames) и обеспечивает надёжную передачу между устройствами в одной сети. Он использует **MAC-адреса** и технологии, такие как Ethernet.

### MAC-адреса

- **MAC-адрес** (Media Access Control) — уникальный 48-битный идентификатор сетевого устройства (например, 00:1A:2B:3C:4D:5E).
- Назначается производителем оборудования (например, сетевой карты).
- Используется для идентификации устройств в пределах одной сети (LAN).
- **Пример**: Коммутатор отправляет кадр от компьютера с MAC 00:1A:2B:3C:4D:5E к принтеру с MAC 00:1B:2C:3D:4E:5F.

### Технология Ethernet

- **Ethernet** — стандарт для проводных локальных сетей (IEEE 802.3).
- Формирует кадры, содержащие:
  - **Заголовок**: MAC-адреса отправителя и получателя, тип данных.
  - **Данные**: Полезная нагрузка (до 1500 байт).
  - **Контрольная сумма** (FCS): Для проверки целостности.
- Поддерживает скорости от 10 Мбит/с (старый Ethernet) до 100 Гбит/с (современные сети).
- **Пример**: В офисе Ethernet-кабель соединяет компьютер и коммутатор, передавая кадры с данными.

---

## Коммутаторы, коллизии, кадры

### Коммутаторы (Switches)

- **Коммутаторы** — устройства канального уровня, которые пересылают кадры в локальной сети.
- Используют MAC-адреса для определения получателя.
- Создают таблицу MAC-адресов, связывая их с портами.
- В отличие от устаревших **хабов**, коммутаторы отправляют данные только нужному устройству, снижая перегрузку сети.
- **Пример**: Коммутатор получает кадр с MAC-адресом принтера и отправляет его только на порт, связанный с принтером.

### Коллизии

- **Коллизия** — ситуация, когда два устройства одновременно пытаются передать данные в одной сети, что приводит к ошибке.
- Чаще встречается в старых сетях с хабами, где все устройства делят одну среду передачи.
- Современные коммутаторы и полнодуплексный режим (full-duplex) устраняют коллизии, позволяя одновременно отправлять и принимать данные.
- **Механизм избежания**: Протокол CSMA/CD (Carrier Sense Multiple Access with Collision Detection) в Ethernet обнаруживает коллизии и повторяет передачу.
- **Пример**: В старой сети с хабом два компьютера отправляют данные одновременно, вызывая коллизию; CSMA/CD останавливает передачу и повторяет её.

### Кадры

- **Кадр** — единица данных на канальном уровне.
- Структура кадра Ethernet:
  - **Преамбула**: Синхронизация (7 байт).
  - **Разделитель**: Отметка начала кадра (1 байт).
  - **MAC-адрес получателя**: 6 байт.
  - **MAC-адрес отправителя**: 6 байт.
  - **Тип/длина**: Тип данных или длина (2 байта).
  - **Данные**: Полезная нагрузка (46–1500 байт).
  - **FCS** (Frame Check Sequence): Контрольная сумма (4 байта).
- **Пример**: Компьютер отправляет кадр с HTTP-запросом, который содержит MAC-адреса и данные, а коммутатор проверяет FCS для обнаружения ошибок.

---

## Значение для бэкенд-разработчиков

Понимание физического и канального уровней помогает бэкенд-разработчикам:

1. **Диагностика проблем**:
   - Проблемы на физическом уровне (например, обрыв кабеля) или канальном уровне (неправильный MAC-адрес) могут блокировать передачу данных.
   - Пример: Если сервер недоступен, проверка кабеля или порта коммутатора может выявить проблему.

2. **Оптимизация сетей**:
   - Знание пропускной способности (например, 1 Гбит/с для Ethernet) помогает оценивать производительность.
   - Пример: Выбор оптоволокна для высокоскоростных серверов.

3. **Работа с оборудованием**:
   - Настройка коммутаторов или точек доступа требует понимания MAC-адресов и Ethernet.
   - Пример: Настройка VLAN на коммутаторе для разделения трафика.

4. **Безопасность**:
   - Понимание MAC-адресов помогает защищаться от атак, таких как ARP-спуфинг.
   - Пример: Фильтрация по MAC-адресам на коммутаторе ограничивает доступ к сети.

**Пример для разработчика**: Если API-запросы не доходят, разработчик может проверить физический уровень (подключение кабеля) или канальный уровень (таблицу MAC-адресов на коммутаторе).

---

## Примечания

- **Физический уровень**: Основа передачи данных, определяет, как биты проходят через кабели или радиоволны.
- **Канальный уровень**: Формирует кадры, использует MAC-адреса и Ethernet для надёжной передачи в локальной сети.
- **Для разработчиков**: Знание этих уровней помогает диагностировать проблемы и оптимизировать сетевые приложения.
