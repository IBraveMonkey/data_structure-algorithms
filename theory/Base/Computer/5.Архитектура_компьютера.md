## Введение

Архитектура компьютера определяет, как его компоненты взаимодействуют для выполнения задач. Она описывает организацию процессора, памяти и способов обработки данных. Этот раздел объясняет основные архитектуры (фон-Неймановская и Гарвардская), наборы инструкций, микроархитектуру, многоядерные процессоры и иерархию памяти.

## 1. Фон-Неймановская архитектура

Фон-Неймановская архитектура — основа большинства современных компьютеров.

- **Описание**:
  - Единая память хранит **инструкции** (программы) и **данные**.
  - Процессор последовательно выполняет инструкции, извлекая их из памяти.
- **Компоненты**:
  - **CPU**: Выполняет инструкции (арифметические, логические, управление).
  - **Память**: Хранит данные и программы.
  - **Шины**: Передают данные, адреса и управляющие сигналы.
  - **Ввод/вывод**: Интерфейсы для периферийных устройств.
- **Принцип работы**:
  - Цикл: **выборка** (fetch) → **декодирование** (decode) → **выполнение** (execute).
  - Программа хранится как последовательность инструкций в памяти.
- **Ограничения**:
  - "Бутылочное горлышко фон Неймана": Единая шина ограничивает скорость передачи данных.

> **Пример**: Процессор Intel x86 использует фон-Неймановскую архитектуру, где RAM хранит и код программы, и её данные.

## 2. Гарвардская архитектура

Гарвардская архитектура разделяет память для инструкций и данных.

- **Описание**:
  - Отдельные памяти и шины для **инструкций** и **данных**.
  - Позволяет одновременно извлекать инструкции и данные, ускоряя обработку.
- **Применение**:
  - Часто используется в микроконтроллерах и DSP (цифровых сигнальных процессорах).
  - Пример: Микроконтроллеры AVR (Arduino).
- **Отличия от фон-Неймановской**:
  |                |                  |                  |
  | -------------- | ---------------- | ---------------- |
  | Характеристика | Фон-Неймановская | Гарвардская      |
  | Память         | Единая           | Раздельная       |
  | Шины           | Одна             | Две              |
  | Скорость       | Медленнее        | Быстрее          |
  | Гибкость       | Универсальна     | Специализирована |

> **Пример**: В Гарвардской архитектуре процессор может читать следующую инструкцию, одновременно обрабатывая данные.

## 3. Наборы инструкций

Набор инструкций (Instruction Set Architecture, ISA) определяет команды, которые процессор может выполнять.

- **Типы ISA**:
  - **CISC (Complex Instruction Set Computing)**:
    - Сложные инструкции, выполняющие несколько операций.
    - Пример: x86 (Intel, AMD).
    - Плюс: Меньше инструкций для задачи.
    - Минус: Сложнее проектировать процессор.
  - **RISC (Reduced Instruction Set Computing)**:
    - Простые инструкции, выполняемые за один цикл.
    - Пример: ARM (смартфоны, Raspberry Pi).
    - Плюс: Быстрее, энергоэффективнее.
    - Минус: Больше инструкций для задачи.
- **Примеры инструкций**:
  - ADD R1, R2: Сложить значения регистров.
  - MOV R1, 10: Записать 10 в регистр R1.
  - JMP 0x1000: Перейти к адресу 0x1000.
- **Цикл выполнения**:
  1. Выборка инструкции из памяти.
  2. Декодирование (определение типа команды).
  3. Выполнение (например, сложение в ALU).
  4. Запись результата (в регистр или память).

> **Пример**: ARM-процессоры в смартфонах используют RISC для энергоэффективности.

## 4. Микроархитектура

Микроархитектура — это реализация ISA на уровне аппаратного обеспечения.

- **Компоненты**:
  - **Конвейер (pipeline)**: Разделяет выполнение инструкций на этапы (выборка, декодирование, выполнение), увеличивая пропускную способность.
  - **Предсказание ветвлений**: Угадывает, какой путь программы выбрать (например, при условных операторах), чтобы минимизировать задержки.
  - **Суперскалярность**: Выполнение нескольких инструкций одновременно.
- **Примеры**:
  - Intel Skylake, AMD Zen — микроархитектуры для x86.
  - ARM Cortex-A — микроархитектура для ARM.
- **Оптимизации**:
  - Увеличение числа стадий конвейера.
  - Кэширование инструкций и данных.

> **Пример**: Конвейер в процессоре Intel позволяет выполнять до 4 инструкций за цикл.

## 5. Многоядерные процессоры

Многоядерные процессоры содержат несколько вычислительных ядер на одном чипе.

- **Описание**:
  - Каждое ядро — независимый процессор, выполняющий свои инструкции.
  - Ускоряет многозадачность и параллельные вычисления.
- **Гиперпоточность (Hyper-Threading)**:
  - Позволяет одному ядру обрабатывать два потока команд одновременно.
  - Пример: Intel Core i7 с 8 ядрами и 16 потоками.
- **Проблемы**:
  - Синхронизация ядер.
  - Ограничения по доступу к общей памяти.

> **Пример**: Игровой процессор Ryzen 9 с 12 ядрами обрабатывает графику, физику и ИИ одновременно.

## 6. Кэш и иерархия памяти

Иерархия памяти оптимизирует доступ к данным по скорости и стоимости.

- **Уровни памяти**:
  |          |                |                 |             |              |
  | -------- | -------------- | --------------- | ----------- | ------------ |
  | Уровень  | Тип            | Скорость        | Объём       | Пример       |
  | Регистры | Внутри CPU     | Самая быстрая   | КБ          | Регистр R1   |
  | Кэш L1   | В CPU          | Очень быстрая   | 64 КБ/ядро  | Данные ALU   |
  | Кэш L2   | В CPU          | Быстрая         | 512 КБ/ядро | Буфер        |
  | Кэш L3   | Общий для ядер | Средняя         | 8-32 МБ     | Общие данные |
  | RAM      | Вне CPU        | Медленная       | 16-64 ГБ    | Программы    |
  | SSD/HDD  | Хранилище      | Очень медленная | 1 ТБ        | Файлы        |
- **Принципы работы кэша**:
  - **Локальность данных**: Часто используемые данные хранятся ближе к CPU.
  - **Согласованность кэша**: Синхронизация данных между ядрами.
  - **Латентность**: L1 — ~1 нс, RAM — ~100 нс, SSD — ~100 мкс.
- **Пропускная способность**:
  - Кэш: Высокая (ГБ/с).
  - RAM: Средняя (~50 ГБ/с для DDR4).

> **Пример**: Кэш L1 хранит часто используемые переменные, чтобы CPU не обращался к RAM.

## Ключевые выводы

- **Фон-Неймановская архитектура** использует единую память для данных и программ, но ограничена скоростью шины.
- **Гарвардская архитектура** разделяет память, ускоряя обработку, но менее универсальна.
- **Наборы инструкций** (CISC, RISC) определяют команды процессора; RISC быстрее, CISC гибче.
- **Микроархитектура** оптимизирует выполнение инструкций через конвейеры и предсказания.
- **Многоядерные процессоры** ускоряют параллельные задачи, гиперпоточность повышает эффективность.
- **Иерархия памяти** (регистры → кэш → RAM → хранилища) балансирует скорость и объём.
- Архитектура компьютера связывает аппаратное и программное обеспечение.
