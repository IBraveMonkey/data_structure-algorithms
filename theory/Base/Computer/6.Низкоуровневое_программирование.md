## Введение

Низкоуровневое программирование работает непосредственно с аппаратным обеспечением компьютера, используя машинный код, ассемблер и механизмы управления процессором. Этот раздел объясняет, как программы взаимодействуют с процессором, памятью и устройствами на самом низком уровне.

## 1. Машинный код

Машинный код — это набор инструкций, которые процессор выполняет напрямую.

- **Описание**:
  - Представлен в двоичной форме (например, 10110000 01100001).
  - Каждая инструкция соответствует конкретной операции процессора (например, сложение, переход).
- **Формат**:
  - Состоит из **опкода** (операционного кода, указывает тип инструкции) и **операндов** (данные или адреса).
  - Пример: MOV AX, 1 в x86 может быть закодировано как B8 01 00.
- **Особенности**:
  - Зависит от архитектуры процессора (x86, ARM).
  - Трудно читать и писать вручную.
- **Применение**:
  - Исполняемый файл программы — это машинный код.
  - Используется в прошивках и драйверах.

> **Пример**: Инструкция ADD R1, R2 в машинном коде может выглядеть как 00000001 00000010 (зависит от процессора).

## 2. Ассемблер

Ассемблер — язык программирования, упрощающий написание машинного кода с помощью мнемонических команд.

- **Описание**:
  - Каждая инструкция ассемблера соответствует одной или нескольким инструкциям машинного кода.
  - Пример: MOV AX, 1 (переместить 1 в регистр AX).
- **Основные команды** (на примере x86):
  |         |                    |                                 |
  | ------- | ------------------ | ------------------------------- |
  | Команда | Описание           | Пример                          |
  | MOV     | Перемещение данных | MOV AX, BX (копировать BX в AX) |
  | ADD     | Сложение           | ADD AX, 5 (AX += 5)             |
  | SUB     | Вычитание          | SUB AX, 2 (AX -= 2)             |
  | JMP     | Переход            | JMP label (перейти к метке)     |
  | CMP     | Сравнение          | CMP AX, BX (сравнить AX и BX)   |
- **Работа с регистрами**:
  - Регистры (AX, BX, CX в x86) — быстрая память внутри CPU.
  - Пример: MOV AX, 10 загружает 10 в регистр AX.
- **Ассемблеры**:
  - Программы (NASM, MASM) переводят код ассемблера в машинный код.
- **Применение**:
  - Оптимизация критических участков кода.
  - Разработка драйверов, ОС, прошивок.

> **Пример**: Программа на ассемблере для сложения двух чисел:

```
MOV AX, 5    ; AX = 5
MOV BX, 3    ; BX = 3
ADD AX, BX   ; AX = AX + BX (8)
```

## 3. Компиляторы и интерпретаторы

Компиляторы и интерпретаторы преобразуют высокоуровневый код (например, C, Python) в машинный код.

- **Компилятор**:
  - Переводит весь код в машинный код перед выполнением.
  - Пример: GCC для C/C++ создаёт исполняемый файл.
  - Плюс: Быстрое выполнение.
  - Минус: Долгая компиляция.
- **Интерпретатор**:
  - Выполняет код построчно, без создания отдельного файла.
  - Пример: Python интерпретирует код в реальном времени.
  - Плюс: Гибкость, отладка.
  - Минус: Медленнее компилятора.
- **Промежуточный код**:
  - Некоторые языки (Java, Python) компилируются в байт-код, который выполняется виртуальной машиной (JVM, PVM).
- **Применение**:
  - Компиляторы: ОС, игры, драйверы.
  - Интерпретаторы: Скрипты, веб-разработка.

> **Пример**: Код на C int a = 5 + 3; компилируется в инструкции ассемблера, такие как MOV и ADD.

## 4. Прерывания и обработка событий

Прерывания позволяют процессору реагировать на внешние или внутренние события.

- **Описание**:
  - Прерывание — сигнал, заставляющий процессор приостановить текущую задачу и выполнить обработчик.
  - Типы:
    - **Аппаратные**: От устройств (клавиатура, таймер).
    - **Программные**: Вызываются кодом (например, деление на ноль).
    - **Исключения**: Ошибки (например, доступ к неверной памяти).
- **Механизм**:
  - Процессор сохраняет текущее состояние (регистры, PC).
  - Выполняет обработчик прерывания (из таблицы векторов прерываний).
  - Возвращается к прерванной задаче.
- **Пример**:
  - Нажатие клавиши вызывает прерывание, и ОС обрабатывает ввод.
- **Применение**:
  - Управление устройствами (мышь, USB).
  - Многозадачность в ОС……

> **Пример**: Таймер вызывает прерывание каждую миллисекунду, позволяя ОС переключать задачи.

## Ключевые выводы

- **Машинный код** — двоичные инструкции, которые выполняет процессор, зависят от архитектуры.
- **Ассемблер** упрощает программирование на низком уровне, используя мнемонические команды и регистры.
- **Компиляторы** переводят высокоуровневый код в машинный код для быстрого выполнения, **интерпретаторы** выполняют код построчно.
- **Прерывания** позволяют процессору реагировать на события, обеспечивая взаимодействие с устройствами и многозадачность.
- Низкоуровневое программирование критично для tuo разработки ОС, драйверов и оптимизации производительности.
