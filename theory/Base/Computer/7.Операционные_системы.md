## Введение

Операционная система (ОС) — программное обеспечение, управляющее аппаратными и программными ресурсами компьютера. Она обеспечивает интерфейс между пользователем и оборудованием, а также управляет процессами, памятью, устройствами и безопасностью. Этот раздел объясняет роль ОС, её типы, структуру ядра, управление ресурсами и безопасность.

## 1. Что такое ОС

Операционная система — посредник между аппаратным обеспечением и пользовательскими программами.

- **Функции**:
  - **Управление процессами**: Запуск, выполнение и завершение программ.
  - **Управление памятью**: Распределение памяти между процессами.
  - **Управление устройствами**: Взаимодействие с периферией (клавиатура, диск).
  - **Файловая система**: Организация хранения данных.
  - **Интерфейс пользователя**: Графический (GUI) или текстовый (CLI).
- **Примеры**:
  - Windows, macOS, Linux — универсальные ОС.
  - FreeRTOS, QNX — для встраиваемых систем.
- **Роль**:
  - Обеспечивает абстракцию: программы не работают напрямую с оборудованием.
  - Упрощает разработку приложений.

> **Пример**: Windows запускает браузер, выделяя ему память и процессорное время.

## 2. Типы ОС

Операционные системы различаются по назначению и возможностям.

- **Универсальные**:
  - **Windows**: Популярна для ПК, игр, офиса.
  - **macOS**: Оптимизирована для устройств Apple.
  - **Linux**: Гибкая, используется в серверах, ПК, встраиваемых системах.
- **Мобильные**:
  - Android, iOS — для смартфонов и планшетов.
- **Реального времени (RTOS)**:
  - Выполняют задачи с жёсткими временными ограничениями.
  - Пример: QNX в автомобилях.
- **Встраиваемые**:
  - Для устройств (роутеры, умные часы).
  - Пример: FreeRTOS.
- **Серверные**:
  - Оптимизированы для сетевых задач.
  - Пример: Ubuntu Server.

> **Пример**: Linux используется на серверах из-за стабильности и открытого кода.

## 3. Ядро ОС

Ядро — центральная часть ОС, управляющая аппаратными ресурсами.

- **Типы ядер**:
  - **Монолитное**:
    - Все функции (драйверы, файловая система) в одном блоке.
    - Плюс: Быстрое выполнение.
    - Минус: Сложность отладки.
    - Пример: Linux.
  - **Микроядро**:
    - Минимальный набор функций в ядре, остальное — в пользовательском пространстве.
    - Плюс: Надёжность, модульность.
    - Минус: Медленнее.
    - Пример: QNX.
  - **Гибридное**:
    - Комбинация монолитного и микроядра.
    - Пример: Windows, macOS.
- **Компоненты ядра**:
  - **Планировщик процессов**: Распределяет процессорное время.
  - **Диспетчер памяти**: Управляет виртуальной и физической памятью.
  - **Драйверы**: Интерфейс для устройств.
  - **Системные вызовы**: Интерфейс для взаимодействия программ с ядром.

> **Пример**: В Linux системный вызов open() позволяет программе открыть файл.

### 3.1. Управление процессами

- **Процесс**: Программа в состоянии выполнения, включая код, данные и состояние.
- **Поток**: Лёгкая единица выполнения внутри процесса.
- **Планировщик**:
  - Распределяет процессорное время между процессами/потоками.
  - Алгоритмы: Round-Robin, приоритетный, многоуровневый.
- **Состояния процесса**:
  |             |                                |
  | ----------- | ------------------------------ |
  | Состояние   | Описание                       |
  | Новый       | Создаётся                      |
  | Выполняется | Использует CPU                 |
  | Ожидание    | Ждёт ресурса (например, ввода) |
  | Готов       | Готов к выполнению             |
  | Завершён    | Завершил работу                |

> **Пример**: Планировщик в Windows переключает браузер и текстовый редактор каждые несколько миллисекунд.

### 3.2. Управление памятью

- **Физическая память**: Реальная RAM.
- **Виртуальная память**:
  - Абстракция, позволяющая каждому процессу думать, что он использует всю память.
  - Реализуется через **страничную организацию** (разделение памяти на страницы, обычно 4 КБ).
- **Своп (swap)**:
  - Часть диска, используемая как дополнительная память.
  - Медленнее RAM.
- **Механизмы**:
  - **Таблица страниц**: Сопоставляет виртуальные адреса с физическими.
  - **TLB (Translation Lookaside Buffer)**: Кэш для ускорения преобразования адресов.

> **Пример**: Виртуальная память позволяет запускать программы, даже если RAM заполнена, используя своп.

### 3.3. Управление устройствами

- **Драйверы**:
  - Программы, обеспечивающие взаимодействие ОС с устройствами.
  - Пример: Драйвер GPU для рендеринга графики.
- **Ввод/вывод**:
  - **Синхронный**: Процесс ждёт завершения операции.
  - **Асинхронный**: Процесс продолжает работу, пока устройство выполняет задачу.
- **Прерывания**:
  - Устройства сигнализируют ядру о событиях (например, нажатие клавиши).

> **Пример**: Драйвер USB позволяет ОС распознать подключённый флеш-накопитель.

## 4. Файловые системы

Файловая система организует хранение данных на дисках.

- **Типы**:
  |                  |               |                                            |
  | ---------------- | ------------- | ------------------------------------------ |
  | Файловая система | ОС            | Особенности                                |
  | NTFS             | Windows       | Поддержка больших файлов, шифрование       |
  | ext4             | Linux         | Высокая производительность, журналирование |
  | APFS             | macOS         | Оптимизация для SSD, шифрование            |
  | FAT32            | Универсальная | Простота, ограничение размера файла (4 ГБ) |
- **Структура**:
  - **Файлы**: Данные с именем и метаданными (размер, дата).
  - **Каталоги**: Организуют файлы в иерархию.
  - **Журналирование**: Защита от сбоев путём записи операций.
- **Операции**:
  - Чтение, запись, удаление, перемещение файлов.
  - Управление правами доступа.

> **Пример**: В ext4 файл /home/user/doc.txt хранится как набор блоков на диске.

## 5. Сетевые функции ОС

ОС управляет сетевыми соединениями для обмена данными.

- **Сетевой стек**:
  - Слои (по модели TCP/IP): Прикладной, транспортный, сетевой, канальный.
  - Пример: HTTP (прикладной) работает поверх TCP (транспортный).
- **Сокеты**:
  - Интерфейс для сетевых соединений.
  - Пример: Программа использует сокет для отправки данных на сервер.
- **Протоколы**:
  - TCP: Надёжная передача с подтверждением.
  - UDP: Быстрая, но без гарантии доставки.
  - IP: Адресация (IPv4, IPv6).
- **Применение**:
  - Веб-браузеры, серверы, VPN.

> **Пример**: ОС отправляет HTTP-запрос через TCP/IP для загрузки веб-страницы.

## 6. Безопасность в ОС

ОС обеспечивает защиту данных и ресурсов.

- **Права доступа**:
  - Пользователи и группы имеют разные уровни доступа (чтение, запись, выполнение).
  - Пример: В Linux файл с правами rwxr-xr-x позволяет владельцу всё, а другим — только чтение и выполнение.
- **Изоляция процессов**:
  - Каждый процесс работает в своём адресном пространстве.
  - Предотвращает вмешательство одного процесса в другой.
- **Шифрование**:
  - Защита данных на диске (BitLocker, FileVault).
  - Безопасные сетевые соединения (TLS).
- **Аутентификация**:
  - Пароли, биометрия, двухфакторная аутентификация.

> **Пример**: Windows Defender сканирует программы на наличие угроз перед запуском.

## Ключевые выводы

- **ОС** управляет процессами, памятью, устройствами, файловыми системами и сетями, предоставляя интерфейс для пользователей.
- **Типы ОС** включают универсальные (Windows, Linux), мобильные, реального времени и встраиваемые.
- **Ядро** (монолитное, микроядро, гибридное) координирует ресурсы, включая процессы, память и устройства.
- **Файловые системы** (NTFS, ext4) организуют хранение данных.
- **Сетевые функции** обеспечивают связь через протоколы (TCP, IP) и сокеты.
- **Безопасность** защищает данные через права доступа, изоляцию и шифрование.
- ОС — критический слой, связывающий аппаратное и программное обеспечение.
