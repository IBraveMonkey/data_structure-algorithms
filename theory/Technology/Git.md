# Git: Конспект

## Что такое Git?

Git — распределенная система контроля версий для отслеживания изменений в коде. Позволяет множеству разработчиков работать над проектом, управлять версиями и координировать изменения.

## Основные стадии работы в Git

1. **Рабочая директория (Working Directory)**: Файлы проекта на локальном компьютере, где вы редактируете код.

2. **Индекс (Staging Area)**: Промежуточная область, куда добавляются изменения (файлы) перед коммитом.

3. **Репозиторий (Local Repository)**: Место хранения коммитов (истории изменений) в .git.

4. **Удаленный репозиторий (Remote Repository)**: Хранилище на сервере (например, GitHub), для обмена изменениями.

**Процесс**:  
Изменяете файлы → добавляете в индекс (git add) → фиксируете в репозиторий (git commit) → отправляете в удаленный репо (git push).

## Основные команды Git

- **Инициализация и настройка**:
  - git init — создает новый Git-репозиторий в текущей папке.
  - git clone <url> — клонирует удаленный репозиторий на локальный компьютер.
  - git config --global user.name "Имя" — задает имя пользователя.
  - git config --global user.email "email@example.com" — задает email.
- **Работа с изменениями**:
  - git status — показывает состояние файлов (измененные, в индексе, готовые к коммиту).
  - git add <файл> — добавляет файл в индекс.
  - git add . — добавляет все измененные файлы в индекс.
  - git commit -m "Сообщение" — фиксирует изменения из индекса в репозиторий с комментарием.
  - git commit -am "Сообщение" — добавляет и коммитит отслеживаемые файлы одним шагом.
- **Работа с историей**:
  - git log — показывает историю коммитов.
  - git log --oneline — краткая история коммитов.
  - git diff — показывает изменения в файлах (не в индексе).
  - git diff --staged — показывает изменения в индексе.
- **Работа с удаленным репозиторием**:
  - git push origin <ветка> — отправляет коммиты в удаленный репозиторий.
  - git pull origin <ветка> — забирает и объединяет изменения из удаленного репозитория.
  - git fetch origin — забирает изменения без слияния.
- **Отмена изменений**:
  - git restore <файл> — отменяет изменения в рабочей директории.
  - git restore --staged <файл> — убирает файл из индекса.
  - git reset HEAD^ — отменяет последний коммит, сохраняя изменения.

## Ветки (Branches)

Ветка — указатель на коммит, позволяющий работать над разными версиями проекта параллельно. Основная ветка обычно main.

- **Команды**:
  - git branch — показывает список веток.
  - git branch <имя> — создает новую ветку.
  - git checkout <имя> — переключается на ветку.
  - git checkout -b <имя> — создает и переключается на ветку.
  - git branch -d <имя> — удаляет ветку.
- **Пример**:  
   Создаем ветку feature/login:
  ```bash
  git checkout -b feature/login
  ```
  Добавляем код для логина, коммитим:
  ```bash
  git add .
  git commit -m "Добавить страницу логина"
  ```
  Возвращаемся в main и объединяем:
  ```bash
  git checkout main
  git merge feature/login
  ```

## Merge

**О чем**:  
Объединяет изменения из одной ветки в другую. Создает коммит слияния, если есть конфликты — требует их разрешения.

- **Команда**:
  ```bash
  git merge <ветка>
  ```
- **Пример**:  
   В ветке feature/login добавили страницу логина. В main обновили стили. Сливаем:
  ```bash
  git checkout main
  git merge feature/login
  ```
  Если конфликтов нет, Git создаст коммит слияния. Если есть — редактируем конфликты вручную и коммитим.

## Rebase

**О чем**:  
Переносит коммиты из одной ветки на вершину другой, переписывая историю. Делает историю линейной, но может усложнить работу в команде.

- **Команда**:
  ```bash
  git rebase <ветка>
  ```
- **Пример**:  
   В feature/login 2 коммита, но main обновился. Переносим изменения:
  ```bash
  git checkout feature/login
  git rebase main
  ```
  Решаем конфликты, если есть, затем:
  ```bash
  git checkout main
  git merge feature/login
  ```
  История выглядит, будто feature/login создана после main.

## Tag

**О чем**:  
Метка на коммите, обычно для обозначения релизов (например, v1.0.0). Бывают легковесные и аннотированные.

- **Команды**:
  - git tag <имя> — создает легковесный тег.
  - git tag -a <имя> -m "Сообщение" — создает аннотированный тег.
  - git push origin <имя> — отправляет тег в удаленный репозиторий.
  - git tag — показывает список тегов.
- **Пример**:  
   После завершения версии 1.0:
  ```bash
  git tag -a v1.0.0 -m "Релиз 1.0.0"
  git push origin v1.0.0
  ```
  Тег v1.0.0 фиксирует состояние кода для релиза.

## Советы

- **Merge vs Rebase**: Используйте merge для сохранения истории веток, rebase — для чистой линейной истории (осторожно в команде).
- **Регулярные коммиты**: Делайте маленькие, логические коммиты с понятными сообщениями.
- **Бэкапы**: Перед rebase или сложным merge создавайте резервную ветку.
