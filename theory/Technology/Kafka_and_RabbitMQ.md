# üì® Kafka & RabbitMQ: –°–∏—Å—Ç–µ–º—ã –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≥–ª–∞–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–æ—Ç–ª–∏—á–∏—è)
2. [Apache Kafka: –ü–æ—Ç–æ–∫–∏ —Å–æ–±—ã—Ç–∏–π](#apache-kafka)
3. [RabbitMQ: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –±—Ä–æ–∫–µ—Ä](#rabbitmq)
4. [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏–∫ –¥–æ—Å—Ç–∞–≤–∫–∏](#–ø—Ä–æ—Ç–æ–∫–æ–ª)
5. [–ö–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å?](#–∫–∞–∫-–≤—ã–±—Ä–∞—Ç—å)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã –Ω–∞ Go](#–ø—Ä–∏–º–µ—Ä-–Ω–∞-go)

---

–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –±—ç–∫–µ–Ω–¥–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–µ –æ–±—â–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é. –û–Ω–∏ —à–ª—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ (–ë—Ä–æ–∫–µ—Ä–æ–≤). –î–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞ ‚Äî **Kafka** –∏ **RabbitMQ**.

---

## 1. ‚öôÔ∏è –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ: Push vs Pull

–ì–ª–∞–≤–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –∫—Ä–æ–µ—Ç—Å—è –≤ —Å–ø–æ—Å–æ–±–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º.

```mermaid
graph TD
    subgraph RabbitMQ_Push
    S1[Source] --> RMQ[RabbitMQ]
    RMQ -- "–Ø –ø—Ä–∏—Å–ª–∞–ª —Ç–µ–±–µ –¥–∞–Ω–Ω—ã–µ (Push)" --> C1[Consumer]
    end

    subgraph Kafka_Pull
    S2[Source] --> K[Kafka]
    C2[Consumer] -- "–ï—Å—Ç—å —á—Ç–æ –Ω–æ–≤–µ–Ω—å–∫–æ–µ? (Pull)" --> K
    end
```

- **RabbitMQ**: –ë—Ä–æ–∫–µ—Ä —Å–ª–µ–¥–∏—Ç –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª (ACK) ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ **—É–¥–∞–ª—è–µ—Ç—Å—è**.
- **Kafka**: –ë—Ä–æ–∫–µ—Ä—É –≤—Å—ë —Ä–∞–≤–Ω–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ **–ª–æ–≥** (–∂—É—Ä–Ω–∞–ª). –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å —Å–∞–º –∑–∞—Ö–æ–¥–∏—Ç –∏ —á–∏—Ç–∞–µ—Ç —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è. –°–æ–æ–±—â–µ–Ω–∏—è **—Ö—Ä–∞–Ω—è—Ç—Å—è** –¥–æ–ª–≥–æ (–¥–Ω–∏, –Ω–µ–¥–µ–ª–∏).

---

## 2. üóûÔ∏è Apache Kafka (Event Streaming)

Kafka ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—á–µ—Ä–µ–¥—å, —ç—Ç–æ **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∂—É—Ä–Ω–∞–ª**.

### –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ
```mermaid
graph LR
    Topic[Topic: Orders] --> P0[Partition 0]
    Topic --> P1[Partition 1]
    P0 --> M1[Msg 1]
    P0 --> M2[Msg 2]
    P0 --> M3[Msg 3]
```

- **–ü–∞—Ä—Ç–∏—Ü–∏–∏**: –ù—É–∂–Ω—ã –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏. –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Å—é–º–µ—Ä—ã –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º).
- **Zookeeper / KRaft**: "–ú–æ–∑–≥" —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç, –∫–∞–∫–æ–π –±—Ä–æ–∫–µ—Ä –∂–∏–≤ –∏ –∫—Ç–æ –≥–ª–∞–≤–Ω—ã–π.

> [!IMPORTANT]
> **–ü–æ—Ä—è–¥–æ–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏**. –ï—Å–ª–∏ –≤–∞–º –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Å–æ–±—ã—Ç–∏—è —à–ª–∏ —Å—Ç—Ä–æ–≥–æ –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º, —à–ª–∏—Ç–µ –∏—Ö –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é (–∏—Å–ø–æ–ª—å–∑—É—è –æ–¥–∏–Ω –∫–ª—é—á).

---

## 3. üê∞ RabbitMQ (Message Broker)

RabbitMQ —Å–ª–∞–≤–∏—Ç—Å—è —Å–≤–æ–µ–π –≥–∏–±–∫–æ—Å—Ç—å—é. –û–Ω –º–æ–∂–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ —É–≥–æ–¥–Ω–æ.

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (Exchanges)
```mermaid
graph LR
    P[Producer] --> Ex[Exchange]
    Ex -- "Direct (Key=A)" --> Q1[Queue 1]
    Ex -- "Fanout (All)" --> Q2[Queue 2]
    Ex -- "Topic (Pattern #)" --> Q3[Queue 3]
```

- **Direct**: –ü–∞–∫–µ—Ç –∏–¥–µ—Ç –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –∫–ª—é—á–∞.
- **Fanout**: –ü—Ä–æ–¥—é—Å–µ—Ä –∫—Ä–∏–∫–Ω—É–ª ‚Äî –≤—Å–µ –æ—á–µ—Ä–µ–¥–∏ –ø–æ–ª—É—á–∏–ª–∏ –∫–æ–ø–∏—é (—Ä–∞—Å—Å—ã–ª–∫–∞).
- **Topic**: –ì–∏–±–∫–∏–π —Ñ–∏–ª—å—Ç—Ä –ø–æ —à–∞–±–ª–æ–Ω–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `orders.europe.*`).

---

## 4. üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –§–∏—á–∞ | Kafka | RabbitMQ |
|:---|:---|:---|
| **–ù–∞–≥—Ä—É–∑–∫–∞** | –ú–∏–ª–ª–∏–æ–Ω—ã —Å–æ–æ–±—â/—Å–µ–∫. | –î–µ—Å—è—Ç–∫–∏ —Ç—ã—Å—è—á —Å–æ–æ–±—â/—Å–µ–∫. |
| **–•—Ä–∞–Ω–µ–Ω–∏–µ** | –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ –Ω–∞ –¥–∏—Å–∫–µ. | –î–æ –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Å—é–º–µ—Ä—É. |
| **–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞** | –ú–∏–Ω–∏–º—É–º (—Ç–æ–ª—å–∫–æ —Ç–æ–ø–∏–∫–∏). | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è (—Ñ–∏–ª—å—Ç—Ä—ã, –ø—Ä–∞–≤–∏–ª–∞). |
| **–ü–µ—Ä–µ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ** | –î–∞ (–º–æ–∂–Ω–æ —Å–¥–≤–∏–Ω—É—Ç—å Offset). | –ù–µ—Ç (—Å–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ). |

---

## 5. üíª –ü—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ Go (–í—ã–±–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)

- **Kafka**: `confluent-kafka-go` (—Ç—Ä–µ–±—É–µ—Ç CGO) –∏–ª–∏ `segmentio/kafka-go` (—á–∏—Å—Ç—ã–π Go).
- **RabbitMQ**: `amqp091-go` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç).

> [!TIP]
> **Graceful Shutdown**: –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–µ—Ä–≤–∏—Å–∞ –≤ Go –≤—Å–µ–≥–¥–∞ –¥–æ–∂–∏–¥–∞–π—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —á—Ç–æ–±—ã –±—Ä–æ–∫–µ—Ä –Ω–µ —Å—á–∏—Ç–∞–ª, —á—Ç–æ —Å–µ—Ä–≤–∏—Å "—É–ø–∞–ª" –∏ –Ω–µ –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–ª—è–ª –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–∏–º.

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

1. –ù—É–∂–Ω–∞ **–¥–∏–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞? (–õ–æ–≥–∏, –∫–ª–∏–∫–∏) ‚Äî **Kafka**.
2. –ù—É–∂–Ω–∞ **—Ö–∏—Ç—Ä–∞—è –ª–æ–≥–∏–∫–∞** –¥–æ—Å—Ç–∞–≤–∫–∏? (–ó–∞–∫–∞–∑—ã, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –±–∏–ª–ª–∏–Ω–≥) ‚Äî **RabbitMQ**.
3. Kafka ‚Äî —ç—Ç–æ **–º–∞—Ç—Ä–µ—à–∫–∞** –ª–æ–≥–æ–≤. RabbitMQ ‚Äî —ç—Ç–æ **—É–º–Ω–∞—è –ø–æ—á—Ç–∞**.
