package binary_search

/*
Binary Search (Бинарный поиск)

Что это такое?
Бинарный поиск — это алгоритм поиска элемента в ОТСОРТИРОВАННОМ массиве путём многократного деления интервала поиска пополам.

Зачем это нужно?
- Найти элемент в массиве максимально быстро (сложность O(log n)).
- Найти границу или условия в монотонной функции.

В чём смысл?
- Мы всегда проверяем средний элемент.
- Если средний элемент больше искомого, то и все элементы справа тоже больше (отбрасываем правую половину).
- Если средний элемент меньше искомого, отбрасываем левую половину.

Когда использовать?
- Данные отсортированы.
- Задача поиска элемента, первого вхождения, последнего вхождения.
- Поиск ответа в диапазоне (binary search by answer).

Как работает?
1. Определяем границы `left` и `right`.
2. Пока `left <= right`:
   - Находим `mid`.
   - Если `arr[mid] == target`, возвращаем индекс.
   - Если `arr[mid] > target`, ищем слева (`right = mid - 1`).
   - Иначе ищем справа (`left = mid + 1`).
3. Если цикл завершился, элемент не найден.

Сложность: O(log n)
*/

// BinarySearch - классический бинарный поиск
// Возвращает индекс элемента или -1, если не найден.
func BinarySearch(arr []int, target int) int {
	left := 0
	right := len(arr) - 1

	for left <= right {
		// mid := (left + right) / 2 может вызвать переполнение integer при очень больших left и right
		// Безопасный способ вычисления середины:
		mid := left + (right-left)/2

		if arr[mid] == target {
			return mid
		}

		if arr[mid] > target {
			right = mid - 1 // Ищем в левой части
		} else {
			left = mid + 1 // Ищем в правой части
		}
	}

	return -1
}
