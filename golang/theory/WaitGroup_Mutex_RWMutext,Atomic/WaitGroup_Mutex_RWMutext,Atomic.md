### 1. üë• sync.WaitGroup

### ‚ùì –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?

WaitGroup –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã –≥–æ—Ä—É—Ç–∏–Ω. –≠—Ç–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á, –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ –≤—Å–µ –æ–Ω–∏ –∑–∞–≤–µ—Ä—à–∞—Ç—Å—è, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

### ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- WaitGroup ‚Äî —ç—Ç–æ –ø–æ —Å—É—Ç–∏ —Å—á—ë—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∑–∞–¥–∞—á—É (.Add(n)), –∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (.Done()).

- –ú–µ—Ç–æ–¥ .Wait() –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Å—á—ë—Ç—á–∏–∫ –Ω–µ —Å—Ç–∞–Ω–µ—Ç —Ä–∞–≤–µ–Ω –Ω—É–ª—é.

### üî¨ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"

–í Go **WaitGroup** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `sync.WaitGroup`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª—è:

- **–°—á—ë—Ç—á–∏–∫** (state): —Ö—Ä–∞–Ω–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∂–∏–¥–∞—é—â–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω (**waiters**).
- **–°–µ–º–∞—Ñ–æ—Ä** (sema): –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤—ã–∑–æ–≤–∞ `.Wait()` –¥–æ –º–æ–º–µ–Ω—Ç–∞, –ø–æ–∫–∞ —Å—á—ë—Ç—á–∏–∫ –Ω–µ –æ–±–Ω—É–ª–∏—Ç—Å—è.

> [!IMPORTANT]
> **–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ (Alignment)**: –ù–∞ 32-–±–∏—Ç–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ö `WaitGroup` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—Ä–æ–≤–Ω–µ–Ω –ø–æ 8 –±–∞–π—Ç–∞–º, –∏–Ω–∞—á–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ `state` —É–ø–∞–¥—É—Ç —Å –æ—à–∏–±–∫–æ–π. –í 64-–±–∏—Ç–Ω–æ–º Go —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ WaitGroup:**
```mermaid
graph LR
    subgraph state64 [–°–æ—Å—Ç–æ—è–Ω–∏–µ - 64 –±–∏—Ç–∞]
        C[Counter: 32 –±–∏—Ç–∞]
        W[Waiters: 32 –±–∏—Ç–∞]
    end
    S[Sema: –°–µ–º–∞—Ñ–æ—Ä]
```

–ö–æ–≥–¥–∞ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ `.Add(n)`, —Å—á—ë—Ç—á–∏–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `n`. `.Done()` —É–º–µ–Ω—å—à–∞–µ—Ç –µ–≥–æ –Ω–∞ 1. –ú–µ—Ç–æ–¥ `.Wait()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ **—Å–µ–º–∞—Ñ–æ—Ä—ã** (–Ω–∞–ø—Ä–∏–º–µ—Ä, **futex** –≤ Linux), —á—Ç–æ–±—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### üí° –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```Go
package main

import (
	"fmt"
	"sync"
)
func main() {
	var wg sync.WaitGroup

	for i := 0; i < 5; i++ {
		wg.Add(1) // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É
		go func(id int) {
			defer wg.Done() // –£–º–µ–Ω—å—à–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
			fmt.Printf("–ì–æ—Ä—É—Ç–∏–Ω–∞ %d –≤—ã–ø–æ–ª–Ω–µ–Ω–∞\n", id)
		}(i)
	}
	wg.Wait() // –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –≥–æ—Ä—É—Ç–∏–Ω
	fmt.Println("–í—Å–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
}
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

- –ü—Ä–æ—Å—Ç–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π "–∑–∞–ø—É—Å—Ç–∏–ª –∏ –∂–¥—É".

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WaitGroup –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ—Å–ª–µ .Wait() (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä).

- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –∂–¥–∞—Ç—å).

---

### 2. üîí sync.Mutex

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?

Mutex (–≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–∫—Ü–∏–∏ –∫–æ–¥–∞, –≥–¥–µ –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–∏–º –¥–∞–Ω–Ω—ã–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —É –æ–¥–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω—ã –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ (race condition).

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- .Lock() –±–ª–æ–∫–∏—Ä—É–µ—Ç –º—å—é—Ç–µ–∫—Å, –∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç –µ–≥–æ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å.

- .Unlock() –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –º—å—é—Ç–µ–∫—Å, –ø–æ–∑–≤–æ–ª—è—è –¥—Ä—É–≥–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –µ–≥–æ.

- –ï—Å–ª–∏ –º—å—é—Ç–µ–∫—Å —É–∂–µ –∑–∞—Ö–≤–∞—á–µ–Ω, –≤—ã–∑–æ–≤ .Lock() –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–∑—ã–≤–∞—é—â—É—é –≥–æ—Ä—É—Ç–∏–Ω—É –¥–æ –µ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"

`sync.Mutex` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é **–∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:

- –í–Ω—É—Ç—Ä–∏ –æ–Ω —Ö—Ä–∞–Ω–∏—Ç **state** (–±–∏—Ç–æ–≤–æ–µ –ø–æ–ª–µ: –∑–∞—Ö–≤–∞—á–µ–Ω, –µ—Å—Ç—å –ª–∏ –æ–∂–∏–¥–∞—é—â–∏–µ, —Ä–µ–∂–∏–º –≥–æ–ª–æ–¥–∞–Ω–∏—è) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é **CAS** (**Compare-And-Swap**) –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
- –ï—Å–ª–∏ –º—å—é—Ç–µ–∫—Å –∑–∞–Ω—è—Ç –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏, –≥–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç ¬´—Å–ø–∏–Ω–∏—Ç—å—Å—è¬ª (**spinning**) ‚Äî –∂–¥–∞—Ç—å –≤ —Ü–∏–∫–ª–µ, –Ω–µ –æ—Ç–¥–∞–≤–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –û–°.

#### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã (—Å Go 1.9):

1. **Normal Mode**: –û—á–µ—Ä–µ–¥—å –æ–∂–∏–¥–∞—é—â–∏—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É FIFO, –Ω–æ –ø—Ä–æ—Å–Ω—É–≤—à–∞—è—Å—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∫–æ–Ω–∫—É—Ä–∏—Ä—É–µ—Ç —Å –Ω–æ–≤—ã–º–∏ ¬´–Ω–∞–ª–µ—Ç–∞—é—â–∏–º–∏¬ª –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏. –ù–æ–≤—ã–µ –æ–±—ã—á–Ω–æ –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —É–∂–µ –Ω–∞ CPU.
2. **Starvation Mode** (–†–µ–∂–∏–º –≥–æ–ª–æ–¥–∞–Ω–∏—è): –ï—Å–ª–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞ –∂–¥—ë—Ç –º—å—é—Ç–µ–∫—Å –±–æ–ª–µ–µ **1 –º—Å**, –æ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º –≥–æ–ª–æ–¥–∞–Ω–∏—è. –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –≤–ª–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –æ—á–µ—Ä–µ–¥–∏.

**–°—Ö–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π Mutex:**
```mermaid
graph TD
    A[–°–≤–æ–±–æ–¥–µ–Ω] -->|Lock: Fast Path| B[–ó–∞—Ö–≤–∞—á–µ–Ω: Normal Mode]
    B -->|–°–ø–∏–Ω–Ω–∏–Ω–≥ –Ω–µ –ø–æ–º–æ–≥| C[–í –æ—á–µ—Ä–µ–¥–∏ –æ–∂–∏–¥–∞–Ω–∏—è]
    C -->|–û–∂–∏–¥–∞–Ω–∏–µ > 1–º—Å| D[Starvation Mode]
    D -->|–û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞| B
    B -->|Unlock| A
```

> [!TIP]
> **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø—É—Ç—å (Slow Path)**: –ï—Å–ª–∏ **CAS** –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª —Å—Ä–∞–∑—É, Go –∑–∞–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å–µ–º–∞—Ñ–æ—Ä –û–°, —á—Ç–æ–±—ã ¬´–∑–∞–ø–∞—Ä–∫–æ–≤–∞—Ç—å¬ª –≥–æ—Ä—É—Ç–∏–Ω—É.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```Go
package main

import (
	"fmt"
	"sync"
)
func main() {
	var counter int
	var mu sync.Mutex

	var wg sync.WaitGroup
	for i := 0; i < 100; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			mu.Lock()         // –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –º—å—é—Ç–µ–∫—Å
			counter++         // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è
			mu.Unlock()       // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –º—å—é—Ç–µ–∫—Å
		}()
	}

	wg.Wait()
	fmt.Println("–ò—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:", counter) // –í—Å–µ–≥–¥–∞ 100
}
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—á—ë—Ç—á–∏–∫, –º–∞—Å—Å–∏–≤, –º–∞–ø—É).

- –ü—Ä–æ—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞.

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –¥–∞–∂–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—é—Ç—Å—è (—Å–º. RWMutex –Ω–∏–∂–µ).

- –ó–∞–±—ã—Ç—ã–π .Unlock() –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –¥–µ–¥–ª–æ–∫—É.


### üö• Data Race vs Race Condition

–ß–∞—Å—Ç–æ —ç—Ç–∏ –ø–æ–Ω—è—Ç–∏—è –ø—É—Ç–∞—é—Ç, –Ω–æ –≤ Go (–∏ –≤–æ–æ–±—â–µ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏) –æ–Ω–∏ –∏–º–µ—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ.

#### 1. Data Race (–ì–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ **—É—Ä–æ–≤–Ω—è –ø–∞–º—è—Ç–∏**. –û–Ω–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞:
- –î–≤–µ –∏–ª–∏ –±–æ–ª–µ–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- –•–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑ —ç—Ç–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π ‚Äî —ç—Ç–æ **–∑–∞–ø–∏—Å—å**.
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–º—å—é—Ç–µ–∫—Å–æ–≤, –∫–∞–Ω–∞–ª–æ–≤ –∏ —Ç.–¥.).

> [!IMPORTANT]
> **Data Race** –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–π–º–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –≥–æ–Ω–æ–∫: `go run -race` –∏–ª–∏ `go test -race`.

**–ü—Ä–∏–º–µ—Ä:**
```go
func main() {
    c := 0
    go func() { c++ }() // –ó–∞–ø–∏—Å—å
    fmt.Println(c)       // –ß—Ç–µ–Ω–∏–µ (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –∑–∞–ø–∏—Å—å—é)
}
```

#### 2. Race Condition (–°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏)
–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ **—É—Ä–æ–≤–Ω—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**. –û–Ω–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏ –∑–∞—â–∏—â–µ–Ω.

> [!WARNING]
> **Race Condition** –Ω–∞–º–Ω–æ–≥–æ –æ–ø–∞—Å–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ `-race` –µ–≥–æ **–Ω–µ –ø–æ–π–º–∞–µ—Ç**. –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –≤—Å—ë –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–≤—Å–µ –º—å—é—Ç–µ–∫—Å—ã —Å—Ç–æ—è—Ç), –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–º –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π.

**–ü—Ä–∏–º–µ—Ä:**
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å (–∑–∞—â–∏—â–µ–Ω–æ –º—å—é—Ç–µ–∫—Å–æ–º).
2. –°–ø–∏—Å–∞—Ç—å –¥–µ–Ω—å–≥–∏ (–∑–∞—â–∏—â–µ–Ω–æ –º—å—é—Ç–µ–∫—Å–æ–º).

–ï—Å–ª–∏ –º–µ–∂–¥—É —à–∞–≥–æ–º 1 –∏ 2 –≤–∫–ª–∏–Ω–∏—Ç—Å—è –¥—Ä—É–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥—Ä—É–≥–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ), –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —à–∞–≥–µ 1 —Å—Ç–∞–Ω–µ—Ç –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ–π. –ú—å—é—Ç–µ–∫—Å—ã –∑–∞—â–∏—â–∞—é—Ç –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–æ –Ω–µ –∑–∞—â–∏—â–∞—é—Ç –≤—Å—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∫ –∞—Ç–æ–º–∞—Ä–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é.

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Data Race | Race Condition |
| :--- | :--- | :--- |
| **–£—Ä–æ–≤–µ–Ω—å** | –ü–∞–º—è—Ç—å (Memory access) | –õ–æ–≥–∏–∫–∞ (Semantic/Flow) |
| **–î–µ—Ç–µ–∫—Ç–æ—Ä `-race`** | –õ–æ–≤–∏—Ç (99%) | **–ù–µ –ª–æ–≤–∏—Ç** |
| **–ü—Ä–∏—á–∏–Ω–∞** | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ | –û—à–∏–±–∫–∏ –≤ –¥–∏–∑–∞–π–Ω–µ/–∞–ª–≥–æ—Ä–∏—Ç–º–µ |
| **–õ–µ—á–µ–Ω–∏–µ** | Mutex, Atomic, Channels | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏) |

---

### 3. üìñ sync.RWMutex

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?

RWMutex (Read-Write Mutex) ‚Äî —ç—Ç–æ —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è Mutex, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–ª–∏—á–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≥–æ—Ä—É—Ç–∏–Ω–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- .RLock() –∏ .RUnlock() ‚Äî –¥–ª—è —á—Ç–µ–Ω–∏—è (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∏—Ç–∞—Ç–µ–ª–∏ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è).

- .Lock() –∏ .Unlock() ‚Äî –¥–ª—è –∑–∞–ø–∏—Å–∏ (–ø–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–º Mutex).

- –ß—Ç–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏, –∞ –∑–∞–ø–∏—Å—å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∏—Ç–∞—Ç–µ–ª–∏ –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–∏—Å–∞—Ç–µ–ª—å.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"

- –•—Ä–∞–Ω–∏—Ç —Å—á—ë—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π –∏ —Ñ–ª–∞–≥ –¥–ª—è –ø–∏—Å–∞—Ç–µ–ª—è.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–º —á–∏—Ç–∞—Ç–µ–ª–µ–π.
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–∏—Å–∞—Ç–µ–ª—è**: –ï—Å–ª–∏ –ø–∏—Å–∞—Ç–µ–ª—å –∂–¥—ë—Ç –º—å—é—Ç–µ–∫—Å, –Ω–æ–≤—ã–µ —á–∏—Ç–∞—Ç–µ–ª–∏ –Ω–µ —Å–º–æ–≥—É—Ç –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –µ–≥–æ (—á–µ—Ä–µ–∑ `.RLock()`), –ø–æ–∫–∞ –ø–∏—Å–∞—Ç–µ–ª—å –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç —Ä–∞–±–æ—Ç—É. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç ¬´–∑–∞–≤–∞–ª–∏–≤–∞–Ω–∏–µ¬ª –ø–∏—Å–∞—Ç–µ–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º –ø–æ—Ç–æ–∫–æ–º —á–∏—Ç–∞—Ç–µ–ª–µ–π.

**–õ–æ–≥–∏–∫–∞ RWMutex:**
```mermaid
sequenceDiagram
    participant R as Reader
    participant W as Writer
    R->>R: RLock (OK)
    W->>W: Lock (Wait...)
    Note right of W: –ñ–¥—ë—Ç –≤—ã—Ö–æ–¥–∞ Reader
    R-->>R: RUnlock
    W->>W: Lock (Acquired)
    Note left of R: Reader –±—É–¥–µ—Ç –∂–¥–∞—Ç—å Writer
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```Go
package main

import (
	"fmt"
	"sync"
	"time"
)
func main() {
	var rwmu sync.RWMutex
	data := 0

	// –ß–∏—Ç–∞—Ç–µ–ª–∏
	for i := 0; i < 5; i++ {
		go func(id int) {
			rwmu.RLock()
			fmt.Printf("–ß–∏—Ç–∞—Ç–µ–ª—å %d: –¥–∞–Ω–Ω—ã–µ = %d\n", id, data)
			time.Sleep(100 * time.Millisecond)
			rwmu.RUnlock()
		}(i)
	}
	// –ü–∏—Å–∞—Ç–µ–ª—å
	go func() {
		time.Sleep(50 * time.Millisecond)
		rwmu.Lock()
		data = 42
		fmt.Println("–ü–∏—Å–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–∏–ª –¥–∞–Ω–Ω—ã–µ")
		rwmu.Unlock()
	}()
	time.Sleep(500 * time.Millisecond)
}
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –ö–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—Ç –Ω–∞–¥ –∑–∞–ø–∏—Å—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—ç—à, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è).

- –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö —Å —á–∞—Å—Ç—ã–º —á—Ç–µ–Ω–∏–µ–º.

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ë–æ–ª–µ–µ —Å–ª–æ–∂–µ–Ω –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤.

---

### 4. ‚öõÔ∏è sync/atomic

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?

–ü–∞–∫–µ—Ç atomic –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, int32, int64, uint32) –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º—å—é—Ç–µ–∫—Å–æ–≤. –≠—Ç–æ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º Mutex, —Ç–∞–∫ –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- –û–ø–µ—Ä–∞—Ü–∏–∏ –≤—Ä–æ–¥–µ AddInt32, CompareAndSwapInt32, LoadInt32, StoreInt32 –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ, —Ç–æ –µ—Å—Ç—å –∫–∞–∫ –æ–¥–Ω–∞ –Ω–µ–¥–µ–ª–∏–º–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.

- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –¥—Ä—É–≥–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –Ω–µ –≤–º–µ—à–∞—é—Ç—Å—è –≤ —Å–µ—Ä–µ–¥–∏–Ω—É –æ–ø–µ—Ä–∞—Ü–∏–∏.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"

- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ **LOCK** (–≤ x86) –∏–ª–∏ **LDREX/STREX** (–≤ ARM).
- **CAS** (**Compare-And-Swap**): –ú–µ—Ç–æ–¥ `atomic.CompareAndSwapInt32(&addr, old, new)` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–≤–Ω–æ –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É `old`, –∏ –µ—Å–ª–∏ –¥–∞ ‚Äî –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `new`. –í—Å—ë —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ –æ–¥–∏–Ω —Ç–∞–∫—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

> [!IMPORTANT]
> **–≠—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –º—å—é—Ç–µ–∫—Å–∞**, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ—Ç –≤—ã–∑–æ–≤–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go –∏ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–∞ –≤ –û–°. –≠—Ç–æ ¬´–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è¬ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```Go
package main

import (
	"fmt"
	"sync"
	"sync/atomic"
)
func main() {
	var counter int32

	var wg sync.WaitGroup
	for i := 0; i < 100; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			atomic.AddInt32(&counter, 1) // –ê—Ç–æ–º–∞—Ä–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ
		}()
	}

	wg.Wait()
	fmt.Println("–ò—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:", atomic.LoadInt32(&counter)) // –í—Å–µ–≥–¥–∞ 100
}
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –æ–¥–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º (—Å—á—ë—Ç—á–∏–∫–∏, —Ñ–ª–∞–≥–∏).

- –ö–æ–≥–¥–∞ –≤–∞–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–µ—Ç —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏.

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ (int32, int64, uint32, pointer –∏ —Ç.–¥.).

- –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.

---

### 5. üì¨ –ö–∞–Ω–∞–ª—ã (chan)

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?

–ö–∞–Ω–∞–ª—ã ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Go –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–±–µ–∂–∞—Ç—å —è–≤–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ —É–ø—Ä–æ—â–∞—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- –ö–∞–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç –≥–æ—Ä—É—Ç–∏–Ω—É –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∏–ª–∏ –∑–∞–ø–∏—Å–∏, –µ—Å–ª–∏ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –Ω–µ –≥–æ—Ç–æ–≤–∞.

- –ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è (–¥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±—É—Ñ–µ—Ä–∞).

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"

- –ö–∞–Ω–∞–ª ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –æ—á–µ—Ä–µ–¥—å—é (–¥–ª—è –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö) –∏ –º—å—é—Ç–µ–∫—Å–æ–º –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go –¥–ª—è –ø–∞—Ä–∫–æ–≤–∫–∏ –≥–æ—Ä—É—Ç–∏–Ω –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```Go
package main

import "fmt"

func main() {
	ch := make(chan int)

	go func() {
		ch <- 42 // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
	}()
	data := <-ch // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
	fmt.Println("–ü–æ–ª—É—á–µ–Ω–æ:", data)
}
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏.

- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Mutex.

---

### ‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –≤—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

|            |                                 |                    |                               |
| ---------- | ------------------------------- | ------------------ | ----------------------------- |
| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å              | –ü–ª—é—Å—ã              | –ú–∏–Ω—É—Å—ã                        |
| WaitGroup  | –û–∂–∏–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –≥–æ—Ä—É—Ç–∏–Ω         | –ü—Ä–æ—Å—Ç–æ—Ç–∞           | –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è  |
| Mutex      | –ó–∞—â–∏—Ç–∞ –æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö             | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å         | –ë–ª–æ–∫–∏—Ä—É–µ—Ç —á—Ç–µ–Ω–∏–µ              |
| RWMutex    | –ß–∞—Å—Ç–æ–µ —á—Ç–µ–Ω–∏–µ, —Ä–µ–¥–∫–∞—è –∑–∞–ø–∏—Å—å    | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–µ–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏       |
| atomic     | –ë—ã—Å—Ç—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏  | –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å   | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |
| –ö–∞–Ω–∞–ª—ã     | –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è | –£–¥–æ–±—Å—Ç–≤–æ –≤ Go      | –ù–µ –≤—Å–µ–≥–¥–∞ –≥–∏–±–∫–æ               |

---

### üéØ –í—ã–≤–æ–¥

–ö–∞–∂–¥—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç —Å–≤–æ—é –∑–∞–¥–∞—á—É:

- WaitGroup ‚Äî –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è.

- Mutex/RWMutex ‚Äî –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö.

- atomic ‚Äî –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏.

- –ö–∞–Ω–∞–ª—ã ‚Äî –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏.
