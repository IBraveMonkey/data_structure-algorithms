# üóëÔ∏è Garbage Collector –≤ Go
## üõ†Ô∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

---

## 0. üèÅ –í–≤–µ–¥–µ–Ω–∏–µ

–í Go —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ –∫—É—á–µ (Heap) –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ. **Garbage Collector (GC)** –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è –∑–∞–¥–∞—á—É –ø–æ–∏—Å–∫–∞ –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–æ–π. –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏ –æ—à–∏–±–æ–∫ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∫–∞–∫ –≤ C++).

–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å GC –≤ Go ‚Äî **–Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (low latency)**. Go –∂–µ—Ä—Ç–≤—É–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é —Å–±–æ—Ä–∫–∏ —Ä–∞–¥–∏ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–∞—É–∑—ã –≤ —Ä–∞–±–æ—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã (**Stop-The-World** –∏–ª–∏ **STW**) –±—ã–ª–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω—ã.

---

## 0.1. üåç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ –ø–∞–º—è—Ç–∏

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —É–¥–æ–±—Å—Ç–≤–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.

| –Ø–∑—ã–∫ | –ú–µ—Ö–∞–Ω–∏–∑–º | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
| :--- | :--- | :--- | :--- |
| **C / C++** | **–†—É—á–Ω–æ–µ** (`malloc`/`free`) | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –Ω–µ—Ç –ø–∞—É–∑. | –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —É—Ç–µ—á–µ–∫, —Å–µ–≥—Ñ–æ–ª—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫ "use-after-free". |
| **Java / Go** | **Garbage Collector** | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. | –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ CPU, –ø–∞—É–∑—ã –≤ —Ä–∞–±–æ—Ç–µ (STW). |
| **Rust** | **Ownership & Borrowing** | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å + –°–∫–æ—Ä–æ—Å—Ç—å (–±–µ–∑ GC). | –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–∂–¥–µ–Ω–∏—è ("–±–æ—Ä—å–±–∞" —Å borrow checker). |

### üõ†Ô∏è –ü–æ–¥—Ö–æ–¥—ã –ø–æ–¥—Ä–æ–±–Ω–µ–µ:
1. **C/C++ (Manual)**: –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã–¥–µ–ª–∏—Ç—å –ø–∞–º—è—Ç—å –∏ –∫–æ–≥–¥–∞ –µ—ë –≤–µ—Ä–Ω—É—Ç—å –û–°. –ï—Å–ª–∏ –∑–∞–±—ã—Ç—å `free()`, –ø–∞–º—è—Ç—å "—É—Ç–µ—á–µ—Ç". –ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–≤–∞–∂–¥—ã ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–ø–∞–¥–µ—Ç.
2. **Go (Mark & Sweep)**: –°—Ä–µ–¥–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (Runtime) —Å–∞–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∂–∏–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏ —á–∏—Å—Ç–∏—Ç –º—É—Å–æ—Ä –≤ —Ñ–æ–Ω–µ. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≤–æ–æ–±—â–µ –Ω–µ –¥—É–º–∞–µ—Ç –æ–± –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏ –ø–∞–º—è—Ç–∏.
3. **Rust (Ownership - "–¢—Ä–µ—Ç—å—è –º–µ—Ö–∞–Ω–∏–∫–∞")**: –ü–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –º–æ–º–µ–Ω—Ç –≤—ã—Ö–æ–¥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (RAII). –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –≤–ª–∞–¥–µ–Ω–∏—è, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –∏ –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GC.

---

## 1. üé® –¢—Ä–µ—Ö—Ü–≤–µ—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (Tri-color Mark & Sweep)

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã "–∂–∏–≤—ã", –∞ –∫–∞–∫–∏–µ ‚Äî "–º—É—Å–æ—Ä", Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ç—Ä–µ—Ö —Ü–≤–µ—Ç–æ–≤.

### 1.1 –¶–≤–µ—Ç–∞ –æ–±—ä–µ–∫—Ç–æ–≤
- **–ë–µ–ª—ã–π (White)**: –ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ. GC –µ—â–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç.
- **–°–µ—Ä—ã–π (Grey)**: –û–±—ä–µ–∫—Ç "–∂–∏–≤–æ–π", –Ω–æ –º—ã –µ—â–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –æ–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω —Å—Å—ã–ª–∞–µ—Ç—Å—è (–µ–≥–æ –¥–µ—Ç–µ–π).
- **–ß–µ—Ä–Ω—ã–π (Black)**: –û–±—ä–µ–∫—Ç —Ç–æ—á–Ω–æ "–∂–∏–≤–æ–π", –∏ –≤—Å–µ –µ–≥–æ —Å—Å—ã–ª–∫–∏ —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã.

### 1.2 –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å–∫—Ä–∞—Å–∫–∏
1. –í –Ω–∞—á–∞–ª–µ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã **–±–µ–ª—ã–µ**.
2. GC –±–µ—Ä–µ—Ç "–∫–æ—Ä–Ω–∏" (**Roots**: —Å—Ç–µ–∫–∏, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ) –∏ –ø–æ–º–µ—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç, **—Å–µ—Ä—ã–º–∏**.
> [!NOTE]
> **Roots (–ö–æ—Ä–Ω–∏)** ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞ –æ—Ç—Å—á–µ—Ç–∞ –¥–ª—è —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞. –°—é–¥–∞ –≤—Ö–æ–¥—è—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–µ–∫–∞—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω. –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–µ–ª—å–∑—è "–¥–æ—Å—Ç–∏—á—å", –ø—Ä–æ–π–¥—è –ø–æ —Å—Å—ã–ª–∫–∞–º –æ—Ç –∫–æ—Ä–Ω–µ–π, –∑–Ω–∞—á–∏—Ç –æ–Ω ‚Äî –º—É—Å–æ—Ä.
3. GC –±–µ—Ä–µ—Ç —Å–µ—Ä—ã–π –æ–±—ä–µ–∫—Ç, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –µ–≥–æ –≤ **—á–µ—Ä–Ω—ã–π**, –∞ –≤—Å–µ –µ–≥–æ —Å—Å—ã–ª–∫–∏ –¥–µ–ª–∞–µ—Ç **—Å–µ—Ä—ã–º–∏**.
4. –ü–æ–≤—Ç–æ—Ä—è–µ–º, –ø–æ–∫–∞ —Å–µ—Ä—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è.
5. –í—Å–µ, –∫—Ç–æ –æ—Å—Ç–∞–ª—Å—è **–±–µ–ª—ã–º** ‚Äî –º—É—Å–æ—Ä.

```mermaid
graph LR
    subgraph Legend
        W[–ë–µ–ª—ã–π: –ú—É—Å–æ—Ä/–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ]
        G[–°–µ—Ä—ã–π: –í –ø—Ä–æ—Ü–µ—Å—Å–µ]
        B[–ß–µ—Ä–Ω—ã–π: –ñ–∏–≤–æ–π]
    end
    
    Root((Roots)) --> G1(–°–µ—Ä—ã–π –æ–±—ä–µ–∫—Ç)
    G1 --> B1(–ß–µ—Ä–Ω—ã–π –æ–±—ä–µ–∫—Ç)
    B1 --> B2(–ß–µ—Ä–Ω—ã–π –æ–±—ä–µ–∫—Ç)
    G1 -.-> W1(–ë–µ–ª—ã–π: –ï—â–µ –Ω–µ –¥–æ—à–ª–∏)
    B2 --- X(–£–¥–∞–ª–µ–Ω–æ)
    
    style Root fill:#f9f,stroke:#333
    style W1 fill:#fff,stroke:#333
    style G1 fill:#ccc,stroke:#333
    style B1 fill:#333,color:#fff
    style B2 fill:#333,color:#fff
```

---

## 2. ‚ö° –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –ø—Ä–∞–≤–∏–ª–æ 25% CPU

Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Concurrent GC**. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ –∏–¥–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≤–∞—à–µ–≥–æ –∫–æ–¥–∞.

### 2.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
–ß—Ç–æ–±—ã GC –Ω–µ "—Å—ä–µ–ª" –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã —Å–∏—Å—Ç–µ–º—ã, –≤ Go –¥–µ–π—Å—Ç–≤—É–µ—Ç –∂–µ—Å—Ç–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
**–ù–∞ Garbage Collector –≤—ã–¥–µ–ª—è–µ—Ç—Å—è —Ä–æ–≤–Ω–æ 25% —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (1/4 –æ—Ç GOMAXPROCS).**

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ï—Å–ª–∏ —É –≤–∞—Å 4 –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (`GOMAXPROCS=4`), Go –≤—ã–¥–µ–ª–∏—Ç **—Ä–æ–≤–Ω–æ –æ–¥–∏–Ω** –ø–æ—Ç–æ–∫ (P) —á–∏—Å—Ç–æ –ø–æ–¥ –Ω—É–∂–¥—ã —Ñ–æ–Ω–æ–≤–æ–≥–æ GC-–≤–æ—Ä–∫–µ—Ä–∞.
- –û—Å—Ç–∞–ª—å–Ω—ã–µ 75% –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –∑–∞–Ω—è—Ç—ã –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π.

### 2.2 –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –∞–ª–ª–æ–∫–∞—Ü–∏—è (Assist)
–ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º GC —É—Å–ø–µ–≤–∞–µ—Ç –µ–µ —á–∏—Å—Ç–∏—Ç—å (25% —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç), Go –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—ã-"–Ω–∞—Ä—É—à–∏—Ç–µ–ª–∏" –ø–æ–º–æ–≥–∞—Ç—å —Å–±–æ—Ä—â–∏–∫—É. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Mark Assist**. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ–º–Ω–æ–≥–æ –∑–∞–º–µ–¥–ª—è–µ—Ç—Å—è, –Ω–æ –ø–∞–º—è—Ç—å –Ω–µ —Ä–∞–∑–¥—É–≤–∞–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ.

---

## 3. ‚è≥ –§–∞–∑—ã —Ä–∞–±–æ—Ç—ã GC (–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª)

–°–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–¥–∏–π:

1.  **Sweep Termination (STW)**: –û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –≥–æ—Ä—É—Ç–∏–Ω. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–æ–≤–æ–º—É —Ü–∏–∫–ª—É.
2.  **Marking Phase (Concurrent)**: –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞. GC –∫—Ä–∞—Å–∏—Ç –æ–±—ä–µ–∫—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–µ —Å–∞–º—ã–µ 25% CPU. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.
3.  **Mark Termination (STW)**: –í—Ç–æ—Ä–∞—è –∫–æ—Ä–æ—Ç–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞. –ó–∞–≤–µ—Ä—à–∞–µ–º –ø–æ–∫—Ä–∞—Å–∫—É, –≤—ã–∫–ª—é—á–∞–µ–º Write Barrier.
4.  **Off/Sweeping (Concurrent)**: –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å (–±–µ–ª—ã–µ –æ–±—ä–µ–∫—Ç—ã) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–µ –≤ –∞–ª–ª–æ–∫–∞—Ç–æ—Ä.

> [!NOTE]
> –°—É–º–º–∞—Ä–Ω–æ–µ –≤—Ä–µ–º—è –ø–∞—É–∑ STW (Stop-The-World) –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Go –æ–±—ã—á–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ–Ω–µ–µ **100 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥**. –≠—Ç–æ –≤ —Ç—ã—Å—è—á–∏ —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –º–æ—Ä–≥–Ω—É—Ç—å –≥–ª–∞–∑–æ–º.

---

## 4. üß± Write Barrier (–ë–∞—Ä—å–µ—Ä –∑–∞–ø–∏—Å–∏)

–¢–∞–∫ –∫–∞–∫ GC —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π, –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º–∞:
1. GC –ø–æ–º–µ—Ç–∏–ª –æ–±—ä–µ–∫—Ç –ê —á–µ—Ä–Ω—ã–º.
2. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤–Ω–µ–∑–∞–ø–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å–ª–∞ —Å—Å—ã–ª–∫—É –Ω–∞ –±–µ–ª—ã–π –æ–±—ä–µ–∫—Ç –ë –≤–Ω—É—Ç—Ä—å –æ–±—ä–µ–∫—Ç–∞ –ê.
3. –¢–∞–∫ –∫–∞–∫ –ê —É–∂–µ —á–µ—Ä–Ω—ã–π, GC –µ–≥–æ –Ω–µ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç -> –æ–±—ä–µ–∫—Ç –ë –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –∫–∞–∫ –º—É—Å–æ—Ä!

–ß—Ç–æ–±—ã —ç—Ç–æ–≥–æ –Ω–µ —Å–ª—É—á–∏–ª–æ—Å—å, –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã GC –≤–∫–ª—é—á–∞–µ—Ç—Å—è **Write Barrier**. –≠—Ç–æ –Ω–µ–±–æ–ª—å—à–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è: –µ—Å–ª–∏ –º—ã –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –±–µ–ª—ã–π –æ–±—ä–µ–∫—Ç, –æ–Ω —Ç—É—Ç –∂–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–µ—Ä—ã–º.

---

## 5. ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GC: GOGC –∏ GOMEMLIMIT

### 5.1 GOGC (–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–æ—Å—Ç–∞)
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `GOGC=100`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: –∑–∞–ø—É—Å—Ç–∏—Ç—å GC, –∫–æ–≥–¥–∞ —Ä–∞–∑–º–µ—Ä –Ω–æ–≤–æ–π –∫—É—á–∏ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç 100% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∂–∏–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø—Ä–æ—à–ª–æ–π —Å–±–æ—Ä–∫–∏.
- `GOGC=50`: —Å–±–æ—Ä–∫–∞ –≤ 2 —Ä–∞–∑–∞ —á–∞—â–µ, –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏.
- `GOGC=off`: —Å–±–æ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ –ª–∏–º–∏—Ç—É –ø–∞–º—è—Ç–∏.

### 5.2 GOMEMLIMIT (–õ–∏–º–∏—Ç –ø–∞–º—è—Ç–∏)
–î–æ–±–∞–≤–ª–µ–Ω –≤ Go 1.19. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å –∂–µ—Å—Ç–∫–∏–π –ø–æ—Ä–æ–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2GB). –ï—Å–ª–∏ –ø–∞–º—è—Ç—å –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –ø—Ä–µ–¥–µ–ª—É, GC –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GOGC, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–∞–¥–µ–Ω–∏—è –ø–æ OOM (Out Of Memory).

---

## 6. –ò—Ç–æ–≥

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| **–ê–ª–≥–æ—Ä–∏—Ç–º** | –¢—Ä–µ—Ö—Ü–≤–µ—Ç–Ω—ã–π Mark & Sweep (–º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞). |
| **–†–µ–∂–∏–º** | –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π). |
| **CPU Limit** | 25% –æ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ (1/4 GOMAXPROCS). |
| **–ü–∞—É–∑—ã (STW)** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, –æ–±—ã—á–Ω–æ < 100 ¬µs. |
| **–ó–∞—â–∏—Ç–∞** | Write Barrier –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ç–µ—Ä—é –∂–∏–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è –º—É—Ç–∞—Ü–∏–∏. |

---

## üí° –ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å

Garbage Collector –≤ Go ‚Äî —ç—Ç–æ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —ç–∫–æ–Ω–æ–º–∏–µ–π –ø–∞–º—è—Ç–∏ –∏ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å—é —Å–∏—Å—Ç–µ–º—ã. –û–Ω –Ω–µ —Å–∞–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≤ –ø–ª–∞–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–æ –æ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–≤–Ω–æ, –±–µ–∑ –¥–ª–∏–Ω–Ω—ã—Ö "–∑–∞–º–∏—Ä–∞–Ω–∏–π", —Ç–∏–ø–∏—á–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π Java –∏–ª–∏ Python.